/*! Application : blockchain_demo        Version : 1.0.0        Description : B-VERIFY Retail Blockchain application for Organic Whole Grain Oatmeal Cereal product          Author : saurabh.shankariya@cognizant.com           License : ISC         Created at : 2016-11-16 */
"use strict";function populateUserProfile(a){return{isAdmin:a.isAdmin(),isProducer:a.isProducer(),isManufacturer:a.isManufacturer(),isRetailer:a.isRetailer()}}function populateActiveMenu(a){return{dashboard:"/dashboard"===a,userRegister:"/register"===a,prodRegister:"/product/register"===a,prodShip:"/product/ship"===a,trackShip:"/home"===a,prodAck:"/product/acknowledge"===a}}function populateUserProfile(a){return{isAdmin:a.isAdmin(),isProducer:a.isProducer(),isManufacturer:a.isManufacturer(),isRetailer:a.isRetailer()}}function populateActiveMenu(a){return{dashboard:"/dashboard"===a,userRegister:"/register"===a,prodRegister:"/product/register"===a,prodShip:"/product/ship"===a,trackShip:"/home"===a,prodAck:"/product/acknowledge"===a}}function displayModelDialog(a,b,c){a.open({scope:b,width:600,template:c,closeByDocument:!1})}function displayModelDialog(a,b,c){a.open({scope:b,width:400,template:"",plain:!0})}angular.module("bverifyApp",["appRoute","appConfig","searchModule","productModule","userModule"]);var _env={};window&&(_env=angular.copy(window.__env)),angular.module("appConfig",["LocalStorageModule","ngResource","ui.bootstrap","ngTable","ngAnimate","ngSanitize","ngFileUpload","angularjs-dropdown-multiselect"]).config(["$httpProvider","$logProvider",function(a,b){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"],a.interceptors.push("httpInterceptorService"),b.debugEnabled(__env.enableDebug)}]).factory("httpInterceptorService",["$q","$rootScope","$log","appConstants",function(a,b,c,d){return{request:function(b){return b||a.when(b)},response:function(b){return b||a.when(b)},responseError:function(e){try{b.hasError=!0,e.errorMsg?b.ERROR_MSG=e.errorMsg:d.ACCESS_DENIED_CODE.indexOf(e.status)>=0?b.ERROR_MSG=d.UNAUTHORIZED_ERROR:b.ERROR_MSG=d.SERVICE_ERROR}catch(a){c.error(d.FUNCTIONAL_ERR,a)}return a.reject(e)}}}]).constant("__ENV",_env).constant("appConstants",{SERVICE_ERROR:"Service is temporarily unavailable. Please try after sometime.",UNAUTHORIZED_ERROR:"Access denied ! You may not have permission to acccess.",FUNCTIONAL_ERR:"Something went wrong here....",UPLOAD_ERR:"Error ! Please upload a valid File",ROUTE_STATES_CONSTANTS:["login","register","home","home.result"],ACCESS_DENIED_CODE:[401,403,408],USER_ROLES:{admin:"ADMIN",producer:"PROD",manufacturer:"MANUFACT",retailer:"RETAIL"},PROD_REGISTERED:"Product has been registered successfully",PROD_DELETED:"Product has been deleted successfully",MATERIAL_REGISTERED:"Material has been registered successfully",MATERIAL_DELETED:"Material has been deleted successfully",MULTISELECT_SETTINGS:{scrollable:!0,scrollableHeight:"250px"}}).run(["$rootScope","$window","localStorageService","$log","ngTableDefaults",function(a,b,c,d,e){d.debug("appConfig bootstrapped!"),a.isLoggedIn=!1,a.activeMenu="",a.hasError=!1,a.ERROR_MSG="",a.isSuccess=!1,a.SUCCESS_MSG=""}]);var _self=this;if(angular.module("appRoute",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/home"),a.state("home",{url:"/home",templateUrl:"../modules/search/search.tpl.html",params:{role:window.profile},resolve:{userInfo:function(a,b){return a.role?b.login({id:a.role}):""}},controllerAs:"vm",controller:"searchController"}).state("home.result",{url:"/result",templateUrl:"../modules/search/searchResult.tpl.html",params:{id:"",trackInfo:null},resolve:{shipmentDetails:function(a,b,c){return b.search(a.trackInfo?a.trackInfo:a.id)}},controllerAs:"vm",controller:"searchResultController"}).state("register",{url:"/register",templateUrl:"../modules/user/register.tpl.html",controllerAs:"vm",controller:"userController"}).state("login",{url:"/login",templateUrl:"../modules/user/login.tpl.html",params:{id:window.profile},controllerAs:"vm",controller:"userController"}).state("logout",{url:"/home",controllerAs:"vm",controller:"logoutController"}).state("dashboard",{url:"/dashboard",templateUrl:"../modules/product/dashboard.tpl.html",controllerAs:"vm",controller:"dashboardController"}).state("product",{url:"/product/register",templateProvider:function(a,b){return a.isProducer()?b.fromUrl("../modules/product/material.register.tpl.html"):a.isManufacturer()||a.isRetailer()?b.fromUrl("../modules/product/product.register.tpl.html"):void 0},resolve:{productList:function(a,b){var c=a.getUser();return a.isProducer()?b.getMaterialList({userName:c.userName,userProfile:c.userProfile}):a.isManufacturer()?b.getProductList({userName:c.userName,userProfile:c.userProfile}):void 0}},controllerAs:"vm",controller:"productRegisterController"}).state("shipment",{url:"/product/ship",templateProvider:function(a,b){return a.isProducer()?b.fromUrl("../modules/product/material.ship.tpl.html"):a.isManufacturer()||a.isRetailer()||a.isAdmin()?b.fromUrl("../modules/product/product.ship.tpl.html"):void 0},controllerAs:"vm",controller:"productShipController"}).state("acknowledge",{url:"/product/acknowledge",templateUrl:"../modules/product/product.ack.tpl.html",resolve:{productList:function(a,b){var c=a.getUser();return a.isManufacturer()?b.getMaterialList({userName:c.userName,userProfile:c.userProfile}):a.isRetailer()?b.getProductList({userName:c.userName,userProfile:c.userProfile}):void 0}},controllerAs:"vm",controller:"productAckController"}),c.html5Mode(!0)}]).run(["$rootScope","userModel","$state","appConstants","$log",function(a,b,c,d,e){e.debug("appRoute bootstrapped!"),a.$on("$stateChangeStart",function(f,g,h,i,j){try{a.activeMenu=g.url,a.hasError=!1,a.isSuccess=!1;var k=b.getUser();d.ROUTE_STATES_CONSTANTS.indexOf(g.name)>=0||null!==k&&k.isAuthenticatedUser||(a.isLoggedIn=!1,f.preventDefault(),c.go("home")),angular.equals(g.name,"home")&&angular.equals(i.name,"")&&b.resetUser()}catch(a){e.error(d.FUNCTIONAL_ERR,a)}}),a.reset=function(){a.hasError=!1,a.isSuccess=!1}}]),angular.module("bverifyApp").directive("appHeader",["userModel","$rootScope",function(a,b){return{restrict:"E",templateUrl:"../views/header.tpl.html",scope:{isLoggedIn:"@",user:"="},link:function(c,d,e){c.appName="B-VERIFY",c.appDesc="Retail Blockchain Application",c.userProfile=populateUserProfile(a),c.activeMenu=populateActiveMenu(b.activeMenu)}}}]).directive("appFooter",function(){return{restrict:"E",replace:!0,templateUrl:"../views/footer.tpl.html",link:function(a,b,c){}}}).directive("appLegend",function(){return{restrict:"E",template:'<legend class="legendHead" ng-bind-html="header"></legend>',scope:{header:"@"},link:function(a,b,c){}}}).directive("qrCodeReader",["$rootScope","userModel","appConstants","$log",function(a,b,c,d){return{restrict:"E",template:'<div class="qrSearch" ngf-select="uploadFile($file, $event)"><img src="asset/images/qr_search.png"/></div> ',link:function(b,e,f){try{var g=new QrCode;g.callback=function(b,c){b?a.$broadcast("readQR",b):a.$broadcast("QRError")},b.uploadFile=function(a,b){if(b.preventDefault(),a){var c=/^image\//;if(!c.test(a.type))throw new Error("File type not valid");var d=new FileReader;d.addEventListener("load",function(){g.decode(this.result)}.bind(d),!1),d.readAsDataURL(a)}}}catch(a){d.error(c.FUNCTIONAL_ERR,a)}}}}]),angular.module("bverifyApp").directive("appDatepicker",function(){return{restrict:"E",templateUrl:"../views/datepicker.tpl.html",link:function(a,b,c){try{a.vm.datepickerObj={dateFormat:"MM/dd/yyyy",dateOptions:{startingDay:1,showWeeks:!1},popup:{opened:!1}}}catch(a){}}}}).directive("appFileuploader",["$rootScope",function(a){return{restrict:"E",templateUrl:"../views/fileUpload.tpl.html",link:function(b,c,d){b.file={name:"Upload File"},b.uploadFile=function(c,d){d.preventDefault(),c&&(b.file=c,b.vm.product.file=c),a.$broadcast("fileUpload",b.file)}}}}]).directive("appTopMenu",["userModel","$state","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"../views/topmenu.tpl.html",link:function(c,d,e){var f="";f=a.isManufacturer()?"manufacturer":a.isProducer()?"producer":a.isRetailer()?"retailer":"producer",c.userProfile=populateUserProfile(a),c.onSelect=function(a){f=a.srcElement.id,b.go("home",{role:f})}}}}]).directive("sideMenu",["$rootScope","userModel","appConstants","$log",function(a,b,c,d){return{restrict:"E",templateUrl:"../views/sideMenu.tpl.html",scope:{user:"="},link:function(e,f,g){try{e.userProfile=populateUserProfile(b),e.activeMenu=populateActiveMenu(a.activeMenu),e.a=!1,e.openNav=function(){1==e.a?($("#mySidenav").animate({marginRight:"-165px"},500),e.a=!1):($("#mySidenav").animate({marginRight:"0px"},500),e.a=!0)}}catch(a){d.error(c.FUNCTIONAL_ERR,a)}}}}]),angular.module("productModule").directive("appProductlist",function(){return{restrict:"E",templateUrl:"../views/productList.tpl.html",scope:{list:"=",title:"@",isRegisterScreen:"@",isProcureScreen:"@"},link:function(a,b,c){},controller:function(a,b,c,d,e,f,g,h){function i(){var b={count:3},c={counts:[],paginationMaxBlocks:13,paginationMinBlocks:2,dataset:a.list};return new e(b,c)}var j=this;j.userProfile=populateUserProfile(f),j.customConfigParams=i(),j.editProduct=function(a){g.$broadcast("edit/view",{data:a,isEdit:!0})},j.viewProduct=function(a){g.$broadcast("edit/view",{data:a,isEdit:!1})},j.deleteProduct=function(b){a.d=b,a.confirmDelete=function(){h.close(),g.$broadcast("delete",b)},h.open({scope:a,template:'                            <legend class="legendHead">DELETE REGISTRATION                            </legend>                            <p>Are you sure you want to delete <span ng-if="d.materialName">material {{d.materialName}} </span><span ng-if="d.productName">product {{d.productName}}</span>?</p>                            <div class="ngdialog-buttons">                                <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog(0)">No</button>                                <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirmDelete()">Yes</button>                            </div>',plain:!0})},a.$watchCollection("list",function(a,b){j.customConfigParams=i()})},controllerAs:"vm"}}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),
b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.QrCode=b()}(this,function(){function a(a,b,c){this.ordinal_Renamed_Field=a,this.bits=b,this.name=c}function b(b){this.errorCorrectionLevel=a.forBits(b>>3&3),this.dataMask=7&b}function c(a,b){if(b||(b=a),a<1||b<1)throw"Both dimensions must be greater than 0";this.width=a,this.height=b;var c=a>>5;0!=(31&a)&&c++,this.rowSize=c,this.bits=new Array(c*b);for(var d=0;d<this.bits.length;d++)this.bits[d]=0}function d(a,b){this.count=a,this.dataCodewords=b}function e(a,b,c){this.ecCodewordsPerBlock=a,c?this.ecBlocks=[b,c]:this.ecBlocks=[b]}function f(a,b,c,d,e,f){this.versionNumber=a,this.alignmentPatternCenters=b,this.ecBlocks=[c,d,e,f];for(var g=0,h=c.ecCodewordsPerBlock,i=c.getECBlocks(),j=0;j<i.length;j++){var k=i[j];g+=k.count*(k.dataCodewords+h)}this.totalCodewords=g}function g(){return[new f(1,[],new e(7,new d(1,19)),new e(10,new d(1,16)),new e(13,new d(1,13)),new e(17,new d(1,9))),new f(2,[6,18],new e(10,new d(1,34)),new e(16,new d(1,28)),new e(22,new d(1,22)),new e(28,new d(1,16))),new f(3,[6,22],new e(15,new d(1,55)),new e(26,new d(1,44)),new e(18,new d(2,17)),new e(22,new d(2,13))),new f(4,[6,26],new e(20,new d(1,80)),new e(18,new d(2,32)),new e(26,new d(2,24)),new e(16,new d(4,9))),new f(5,[6,30],new e(26,new d(1,108)),new e(24,new d(2,43)),new e(18,new d(2,15),new d(2,16)),new e(22,new d(2,11),new d(2,12))),new f(6,[6,34],new e(18,new d(2,68)),new e(16,new d(4,27)),new e(24,new d(4,19)),new e(28,new d(4,15))),new f(7,[6,22,38],new e(20,new d(2,78)),new e(18,new d(4,31)),new e(18,new d(2,14),new d(4,15)),new e(26,new d(4,13),new d(1,14))),new f(8,[6,24,42],new e(24,new d(2,97)),new e(22,new d(2,38),new d(2,39)),new e(22,new d(4,18),new d(2,19)),new e(26,new d(4,14),new d(2,15))),new f(9,[6,26,46],new e(30,new d(2,116)),new e(22,new d(3,36),new d(2,37)),new e(20,new d(4,16),new d(4,17)),new e(24,new d(4,12),new d(4,13))),new f(10,[6,28,50],new e(18,new d(2,68),new d(2,69)),new e(26,new d(4,43),new d(1,44)),new e(24,new d(6,19),new d(2,20)),new e(28,new d(6,15),new d(2,16))),new f(11,[6,30,54],new e(20,new d(4,81)),new e(30,new d(1,50),new d(4,51)),new e(28,new d(4,22),new d(4,23)),new e(24,new d(3,12),new d(8,13))),new f(12,[6,32,58],new e(24,new d(2,92),new d(2,93)),new e(22,new d(6,36),new d(2,37)),new e(26,new d(4,20),new d(6,21)),new e(28,new d(7,14),new d(4,15))),new f(13,[6,34,62],new e(26,new d(4,107)),new e(22,new d(8,37),new d(1,38)),new e(24,new d(8,20),new d(4,21)),new e(22,new d(12,11),new d(4,12))),new f(14,[6,26,46,66],new e(30,new d(3,115),new d(1,116)),new e(24,new d(4,40),new d(5,41)),new e(20,new d(11,16),new d(5,17)),new e(24,new d(11,12),new d(5,13))),new f(15,[6,26,48,70],new e(22,new d(5,87),new d(1,88)),new e(24,new d(5,41),new d(5,42)),new e(30,new d(5,24),new d(7,25)),new e(24,new d(11,12),new d(7,13))),new f(16,[6,26,50,74],new e(24,new d(5,98),new d(1,99)),new e(28,new d(7,45),new d(3,46)),new e(24,new d(15,19),new d(2,20)),new e(30,new d(3,15),new d(13,16))),new f(17,[6,30,54,78],new e(28,new d(1,107),new d(5,108)),new e(28,new d(10,46),new d(1,47)),new e(28,new d(1,22),new d(15,23)),new e(28,new d(2,14),new d(17,15))),new f(18,[6,30,56,82],new e(30,new d(5,120),new d(1,121)),new e(26,new d(9,43),new d(4,44)),new e(28,new d(17,22),new d(1,23)),new e(28,new d(2,14),new d(19,15))),new f(19,[6,30,58,86],new e(28,new d(3,113),new d(4,114)),new e(26,new d(3,44),new d(11,45)),new e(26,new d(17,21),new d(4,22)),new e(26,new d(9,13),new d(16,14))),new f(20,[6,34,62,90],new e(28,new d(3,107),new d(5,108)),new e(26,new d(3,41),new d(13,42)),new e(30,new d(15,24),new d(5,25)),new e(28,new d(15,15),new d(10,16))),new f(21,[6,28,50,72,94],new e(28,new d(4,116),new d(4,117)),new e(26,new d(17,42)),new e(28,new d(17,22),new d(6,23)),new e(30,new d(19,16),new d(6,17))),new f(22,[6,26,50,74,98],new e(28,new d(2,111),new d(7,112)),new e(28,new d(17,46)),new e(30,new d(7,24),new d(16,25)),new e(24,new d(34,13))),new f(23,[6,30,54,74,102],new e(30,new d(4,121),new d(5,122)),new e(28,new d(4,47),new d(14,48)),new e(30,new d(11,24),new d(14,25)),new e(30,new d(16,15),new d(14,16))),new f(24,[6,28,54,80,106],new e(30,new d(6,117),new d(4,118)),new e(28,new d(6,45),new d(14,46)),new e(30,new d(11,24),new d(16,25)),new e(30,new d(30,16),new d(2,17))),new f(25,[6,32,58,84,110],new e(26,new d(8,106),new d(4,107)),new e(28,new d(8,47),new d(13,48)),new e(30,new d(7,24),new d(22,25)),new e(30,new d(22,15),new d(13,16))),new f(26,[6,30,58,86,114],new e(28,new d(10,114),new d(2,115)),new e(28,new d(19,46),new d(4,47)),new e(28,new d(28,22),new d(6,23)),new e(30,new d(33,16),new d(4,17))),new f(27,[6,34,62,90,118],new e(30,new d(8,122),new d(4,123)),new e(28,new d(22,45),new d(3,46)),new e(30,new d(8,23),new d(26,24)),new e(30,new d(12,15),new d(28,16))),new f(28,[6,26,50,74,98,122],new e(30,new d(3,117),new d(10,118)),new e(28,new d(3,45),new d(23,46)),new e(30,new d(4,24),new d(31,25)),new e(30,new d(11,15),new d(31,16))),new f(29,[6,30,54,78,102,126],new e(30,new d(7,116),new d(7,117)),new e(28,new d(21,45),new d(7,46)),new e(30,new d(1,23),new d(37,24)),new e(30,new d(19,15),new d(26,16))),new f(30,[6,26,52,78,104,130],new e(30,new d(5,115),new d(10,116)),new e(28,new d(19,47),new d(10,48)),new e(30,new d(15,24),new d(25,25)),new e(30,new d(23,15),new d(25,16))),new f(31,[6,30,56,82,108,134],new e(30,new d(13,115),new d(3,116)),new e(28,new d(2,46),new d(29,47)),new e(30,new d(42,24),new d(1,25)),new e(30,new d(23,15),new d(28,16))),new f(32,[6,34,60,86,112,138],new e(30,new d(17,115)),new e(28,new d(10,46),new d(23,47)),new e(30,new d(10,24),new d(35,25)),new e(30,new d(19,15),new d(35,16))),new f(33,[6,30,58,86,114,142],new e(30,new d(17,115),new d(1,116)),new e(28,new d(14,46),new d(21,47)),new e(30,new d(29,24),new d(19,25)),new e(30,new d(11,15),new d(46,16))),new f(34,[6,34,62,90,118,146],new e(30,new d(13,115),new d(6,116)),new e(28,new d(14,46),new d(23,47)),new e(30,new d(44,24),new d(7,25)),new e(30,new d(59,16),new d(1,17))),new f(35,[6,30,54,78,102,126,150],new e(30,new d(12,121),new d(7,122)),new e(28,new d(12,47),new d(26,48)),new e(30,new d(39,24),new d(14,25)),new e(30,new d(22,15),new d(41,16))),new f(36,[6,24,50,76,102,128,154],new e(30,new d(6,121),new d(14,122)),new e(28,new d(6,47),new d(34,48)),new e(30,new d(46,24),new d(10,25)),new e(30,new d(2,15),new d(64,16))),new f(37,[6,28,54,80,106,132,158],new e(30,new d(17,122),new d(4,123)),new e(28,new d(29,46),new d(14,47)),new e(30,new d(49,24),new d(10,25)),new e(30,new d(24,15),new d(46,16))),new f(38,[6,32,58,84,110,136,162],new e(30,new d(4,122),new d(18,123)),new e(28,new d(13,46),new d(32,47)),new e(30,new d(48,24),new d(14,25)),new e(30,new d(42,15),new d(32,16))),new f(39,[6,26,54,82,110,138,166],new e(30,new d(20,117),new d(4,118)),new e(28,new d(40,47),new d(7,48)),new e(30,new d(43,24),new d(22,25)),new e(30,new d(10,15),new d(67,16))),new f(40,[6,30,58,86,114,142,170],new e(30,new d(19,118),new d(6,119)),new e(28,new d(18,47),new d(31,48)),new e(30,new d(34,24),new d(34,25)),new e(30,new d(20,15),new d(61,16)))]}function h(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c}function i(a,b,c,d,e,f,g){this.image=a,this.possibleCenters=[],this.startX=b,this.startY=c,this.width=d,this.height=e,this.moduleSize=f,this.crossCheckStateCount=[0,0,0],this.resultPointCallback=g}function j(a){function b(a,b){var c=a.X-b.X,d=a.Y-b.Y;return Math.sqrt(c*c+d*d)}function c(a,b,c){var d=b.x,e=b.y;return(c.x-d)*(a.y-e)-(c.y-e)*(a.x-d)}var d,e,f,g=b(a[0],a[1]),h=b(a[1],a[2]),i=b(a[0],a[2]);if(h>=g&&h>=i?(e=a[0],d=a[1],f=a[2]):i>=h&&i>=g?(e=a[1],d=a[0],f=a[2]):(e=a[2],d=a[0],f=a[1]),c(d,e,f)<0){var j=d;d=f,f=j}a[0]=d,a[1]=e,a[2]=f}function k(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c}function l(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}function m(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=[0,0,0,0,0],this.resultPointCallback=null}function n(a,b,c,d,e,f,g,h,i){this.a11=a,this.a12=d,this.a13=g,this.a21=b,this.a22=e,this.a23=h,this.a31=c,this.a32=f,this.a33=i}function o(a,b){this.bits=a,this.points=b}function p(a){this.image=a,this.resultPointCallback=null}function q(a,b){if(null==b||0==b.length)throw"System.ArgumentException";this.field=a;var c=b.length;if(c>1&&0==b[0]){for(var d=1;d<c&&0==b[d];)d++;if(d==c)this.coefficients=a.Zero.coefficients;else{this.coefficients=new Array(c-d);for(var e=0;e<this.coefficients.length;e++)this.coefficients[e]=0;for(var f=0;f<this.coefficients.length;f++)this.coefficients[f]=b[d+f]}}else this.coefficients=b}function r(a){this.expTable=new Array(256),this.logTable=new Array(256);for(var b=1,c=0;c<256;c++)this.expTable[c]=b,b<<=1,b>=256&&(b^=a);for(var c=0;c<255;c++)this.logTable[this.expTable[c]]=c;var d=new Array(1);d[0]=0,this.zero=new q(this,new Array(d));var e=new Array(1);e[0]=1,this.one=new q(this,new Array(e))}function s(a){this.field=a}function t(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(a+b&1)}}function u(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(1&a)}}function v(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return b%3==0}}function w(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return(a+b)%3==0}}function x(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(F(a,1)+b/3&1)}}function y(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return(1&c)+c%3==0}}function z(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return 0==((1&c)+c%3&1)}}function A(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==((a+b&1)+a*b%3&1)}}function B(a){var b=a.Dimension;if(b<21||1!=(3&b))throw"Error BitMatrixParser";this.bitMatrix=a,this.parsedVersion=null,this.parsedFormatInfo=null}function C(a,b){this.numDataCodewords=a,this.codewords=b}function D(a,b,c){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=a,this.numErrorCorrectionCode=c,b<=9?this.dataLengthMode=0:b>=10&&b<=26?this.dataLengthMode=1:b>=27&&b<=40&&(this.dataLengthMode=2)}function E(){this.imagedata=null,this.width=0,this.height=0,this.qrCodeSymbol=null,this.debug=!1,this.callback=null}function F(a,b){return a>=0?a>>b:(a>>b)+(2<<~b)}a.prototype.ordinal=function(){return this.ordinal_Renamed_Field},a.forBits=function(a){if(a<0||a>=G.length)throw"ArgumentException";return G[a]};var G=[new a(1,0,"M"),new a(0,1,"L"),new a(3,2,"H"),new a(2,3,"Q")],H=21522,I=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]],J=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4];b.prototype.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask},b.prototype.Equals=function(a){var b=a;return this.errorCorrectionLevel==b.errorCorrectionLevel&&this.dataMask==b.dataMask},b.numBitsDiffering=function(a,b){return a^=b,J[15&a]+J[15&F(a,4)]+J[15&F(a,8)]+J[15&F(a,12)]+J[15&F(a,16)]+J[15&F(a,20)]+J[15&F(a,24)]+J[15&F(a,28)]},b.decodeFormatInformation=function(a){var c=b.doDecodeFormatInformation(a);return null!=c?c:b.doDecodeFormatInformation(a^H)},b.doDecodeFormatInformation=function(a){for(var c=4294967295,d=0,e=0;e<I.length;e++){var f=I[e],g=f[0];if(g==a)return new b(f[1]);var h=this.numBitsDiffering(a,g);h<c&&(d=f[1],c=h)}return c<=3?new b(d):null},Object.defineProperty(c.prototype,"Dimension",{get:function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}}),c.prototype.get_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);return 0!=(1&F(this.bits[c],31&a))},c.prototype.set_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]|=1<<(31&a)},c.prototype.flip=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]^=1<<(31&a)},c.prototype.clear=function(){for(var a=this.bits.length,b=0;b<a;b++)this.bits[b]=0},c.prototype.setRegion=function(a,b,c,d){if(b<0||a<0)throw"Left and top must be nonnegative";if(d<1||c<1)throw"Height and width must be at least 1";var e=a+c,f=b+d;if(f>this.height||e>this.width)throw"The region must fit inside the matrix";for(var g=b;g<f;g++)for(var h=g*this.rowSize,i=a;i<e;i++)this.bits[h+(i>>5)]|=1<<(31&i)},Object.defineProperty(e.prototype,"TotalECCodewords",{get:function(){return this.ecCodewordsPerBlock*this.NumBlocks}}),Object.defineProperty(e.prototype,"NumBlocks",{get:function(){for(var a=0,b=0;b<this.ecBlocks.length;b++)a+=this.ecBlocks[b].length;return a}}),e.prototype.getECBlocks=function(){return this.ecBlocks},Object.defineProperty(f.prototype,"DimensionForVersion",{get:function(){return 17+4*this.versionNumber}}),f.prototype.buildFunctionPattern=function(){var a=this.DimensionForVersion,b=new c(a);b.setRegion(0,0,9,9),b.setRegion(a-8,0,8,9),b.setRegion(0,a-8,9,8);for(var d=this.alignmentPatternCenters.length,e=0;e<d;e++)for(var f=this.alignmentPatternCenters[e]-2,g=0;g<d;g++)0==e&&(0==g||g==d-1)||e==d-1&&0==g||b.setRegion(this.alignmentPatternCenters[g]-2,f,5,5);return b.setRegion(6,9,1,a-17),b.setRegion(9,6,a-17,1),this.versionNumber>6&&(b.setRegion(a-11,0,3,6),b.setRegion(0,a-11,6,3)),b},f.prototype.getECBlocksForLevel=function(a){return this.ecBlocks[a.ordinal()]},f.VERSION_DECODE_INFO=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017],f.VERSIONS=g(),f.getVersionForNumber=function(a){if(a<1||a>40)throw"ArgumentException";return f.VERSIONS[a-1]},f.getProvisionalVersionForDimension=function(a){if(a%4!=1)throw"Error getProvisionalVersionForDimension";try{return f.getVersionForNumber(a-17>>2)}catch(a){throw"Error getVersionForNumber"}},f.decodeVersionInformation=function(a){for(var c=4294967295,d=0,e=0;e<f.VERSION_DECODE_INFO.length;e++){var g=f.VERSION_DECODE_INFO[e];if(g==a)return this.getVersionForNumber(e+7);var h=b.numBitsDiffering(a,g);h<c&&(d=e+7,c=h)}return c<=3?this.getVersionForNumber(d):null},Object.defineProperty(h.prototype,"X",{get:function(){return Math.floor(this.x)}}),Object.defineProperty(h.prototype,"Y",{get:function(){return Math.floor(this.y)}}),h.prototype.incrementCount=function(){this.count++},h.prototype.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return d<=1||d/this.estimatedModuleSize<=1}return!1},i.prototype.centerFromEnd=function(a,b){return b-a[2]-a[1]/2},i.prototype.foundPatternCross=function(a){for(var b=this.moduleSize,c=b/2,d=0;d<3;d++)if(Math.abs(b-a[d])>=c)return!1;return!0},i.prototype.crossCheckVertical=function(a,b,c,d){var e=this.image,f=e.height,g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;for(var h=a;h>=0&&e.data[b+h*e.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&!e.data[b+h*e.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.data[b+h*e.width]&&g[1]<=c;)g[1]++,h++;if(h==f||g[1]>c)return NaN;for(;h<f&&!e.data[b+h*e.width]&&g[2]<=c;)g[2]++,h++;if(g[2]>c)return NaN;var i=g[0]+g[1]+g[2];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},i.prototype.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),2*a[1],d);if(!isNaN(f)){for(var g=(a[0]+a[1]+a[2])/3,i=this.possibleCenters.length,j=0;j<i;j++){var k=this.possibleCenters[j];if(k.aboutEquals(g,f,e))return new h(e,f,g)}var l=new h(e,f,g);this.possibleCenters.push(l),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(l)}return null},i.prototype.find=function(){for(var a=this.image,b=this.startX,c=this.height,d=b+this.width,e=this.startY+(c>>1),f=[0,0,0],g=0;g<c;g++){var h=e+(0==(1&g)?g+1>>1:-(g+1>>1));f[0]=0,f[1]=0,f[2]=0;for(var i=b;i<d&&!a.data[i+a.width*h];)i++;for(var j=0;i<d;){if(a.data[i+h*a.width])if(1==j)f[j]++;else if(2==j){if(this.foundPatternCross(f)){var k=this.handlePossibleCenter(f,h,i);if(null!=k)return k}f[0]=f[2],f[1]=1,f[2]=0,j=1}else f[++j]++;else 1==j&&j++,f[j]++;i++}if(this.foundPatternCross(f)){var k=this.handlePossibleCenter(f,h,d);if(null!=k)return k}}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"};var K={};K.checkAndNudgePoints=function(a,b){
for(var c=a.width,d=a.height,e=!0,f=0;f<b.length&&e;f+=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(g<-1||g>c||h<-1||h>d)throw"Error.checkAndNudgePoints ";e=!1,g==-1?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),h==-1?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}e=!0;for(var f=b.length-2;f>=0&&e;f-=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(g<-1||g>c||h<-1||h>d)throw"Error.checkAndNudgePoints ";e=!1,g==-1?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),h==-1?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}},K.sampleGrid3=function(a,b,d){for(var e=new c(b),f=new Array(b<<1),g=0;g<b;g++){for(var h=f.length,i=g+.5,j=0;j<h;j+=2)f[j]=(j>>1)+.5,f[j+1]=i;d.transformPoints1(f),K.checkAndNudgePoints(a,f);try{for(var j=0;j<h;j+=2){var k=a.data[Math.floor(f[j])+a.width*Math.floor(f[j+1])];k&&e.set_Renamed(j>>1,g)}}catch(a){throw"Error.checkAndNudgePoints"}}return e};var L=3,M=57,N=8,O=2;Object.defineProperty(k.prototype,"X",{get:function(){return this.x}}),Object.defineProperty(k.prototype,"Y",{get:function(){return this.y}}),k.prototype.incrementCount=function(){this.count++},k.prototype.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return d<=1||d/this.estimatedModuleSize<=1}return!1},Object.defineProperty(m.prototype,"CrossCheckStateCount",{get:function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}}),m.prototype.foundPatternCross=function(a){for(var b=0,c=0;c<5;c++){var d=a[c];if(0==d)return!1;b+=d}if(b<7)return!1;var e=Math.floor((b<<N)/7),f=Math.floor(e/2);return Math.abs(e-(a[0]<<N))<f&&Math.abs(e-(a[1]<<N))<f&&Math.abs(3*e-(a[2]<<N))<3*f&&Math.abs(e-(a[3]<<N))<f&&Math.abs(e-(a[4]<<N))<f},m.prototype.centerFromEnd=function(a,b){return b-a[4]-a[3]-a[2]/2},m.prototype.crossCheckVertical=function(a,b,c,d){for(var e=this.image,f=e.height,g=this.CrossCheckStateCount,h=a;h>=0&&e.data[b+h*e.width];)g[2]++,h--;if(h<0)return NaN;for(;h>=0&&!e.data[b+h*e.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&e.data[b+h*e.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.data[b+h*e.width];)g[2]++,h++;if(h==f)return NaN;for(;h<f&&!e.data[b+h*e.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;h<f&&e.data[b+h*e.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},m.prototype.crossCheckHorizontal=function(a,b,c,d){for(var e=this.image,f=e.width,g=this.CrossCheckStateCount,h=a;h>=0&&e.data[h+b*e.width];)g[2]++,h--;if(h<0)return NaN;for(;h>=0&&!e.data[h+b*e.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&e.data[h+b*e.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.data[h+b*e.width];)g[2]++,h++;if(h==f)return NaN;for(;h<f&&!e.data[h+b*e.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;h<f&&e.data[h+b*e.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},m.prototype.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2]+a[3]+a[4],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),a[2],d);if(!isNaN(f)&&(e=this.crossCheckHorizontal(Math.floor(e),Math.floor(f),a[2],d),!isNaN(e))){for(var g=d/7,h=!1,i=this.possibleCenters.length,j=0;j<i;j++){var l=this.possibleCenters[j];if(l.aboutEquals(g,f,e)){l.incrementCount(),h=!0;break}}if(!h){var m=new k(e,f,g);this.possibleCenters.push(m),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},m.prototype.selectBestPatterns=function(){var a=this.possibleCenters.length;if(a<3)throw"Couldn't find enough finder patterns:"+a+" patterns found";if(a>3){for(var b=0,c=0,d=0;d<a;d++){var e=this.possibleCenters[d].estimatedModuleSize;b+=e,c+=e*e}var f=b/a;this.possibleCenters.sort(function(a,b){var c=Math.abs(b.estimatedModuleSize-f),d=Math.abs(a.estimatedModuleSize-f);return c<d?-1:c==d?0:1});for(var g=Math.sqrt(c/a-f*f),h=Math.max(.2*f,g),d=this.possibleCenters-1;d>=0;d--){var i=this.possibleCenters[d];Math.abs(i.estimatedModuleSize-f)>h&&this.possibleCenters.splice(d,1)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(a,b){return a.count>b.count?-1:a.count<b.count?1:0}),[this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2]]},m.prototype.findRowSkip=function(){var a=this.possibleCenters.length;if(a<=1)return 0;for(var b=null,c=0;c<a;c++){var d=this.possibleCenters[c];if(d.count>=O){if(null!=b)return this.hasSkipped=!0,Math.floor((Math.abs(b.X-d.X)-Math.abs(b.Y-d.Y))/2);b=d}}return 0},m.prototype.haveMultiplyConfirmedCenters=function(){for(var a=0,b=0,c=this.possibleCenters.length,d=0;d<c;d++){var e=this.possibleCenters[d];e.count>=O&&(a++,b+=e.estimatedModuleSize)}if(a<3)return!1;for(var f=b/c,g=0,d=0;d<c;d++)e=this.possibleCenters[d],g+=Math.abs(e.estimatedModuleSize-f);return g<=.05*b},m.prototype.findFinderPattern=function(a){var b=!1;this.image=a;var c=a.height,d=a.width,e=Math.floor(3*c/(4*M));(e<L||b)&&(e=L);for(var f=!1,g=new Array(5),h=e-1;h<c&&!f;h+=e){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;for(var i=0,k=0;k<d;k++)if(a.data[k+h*a.width])1==(1&i)&&i++,g[i]++;else if(0==(1&i))if(4==i)if(this.foundPatternCross(g)){var m=this.handlePossibleCenter(g,h,k);if(m)if(e=2,this.hasSkipped)f=this.haveMultiplyConfirmedCenters();else{var n=this.findRowSkip();n>g[2]&&(h+=n-g[2]-e,k=d-1)}else{do k++;while(k<d&&!a.data[k+h*a.width]);k--}i=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,i=3;else g[++i]++;else g[i]++;if(this.foundPatternCross(g)){var m=this.handlePossibleCenter(g,h,d);m&&(e=g[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var o=this.selectBestPatterns();return j(o),new l(o)},n.prototype.transformPoints1=function(a){for(var b=a.length,c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33,l=0;l<b;l+=2){var m=a[l],n=a[l+1],o=e*m+h*n+k;a[l]=(c*m+f*n+i)/o,a[l+1]=(d*m+g*n+j)/o}},n.prototype.transformPoints2=function(a,b){for(var c=a.length,d=0;d<c;d++){var e=a[d],f=b[d],g=this.a13*e+this.a23*f+this.a33;a[d]=(this.a11*e+this.a21*f+this.a31)/g,b[d]=(this.a12*e+this.a22*f+this.a32)/g}},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(a){return new n(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)},n.quadrilateralToQuadrilateral=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.quadrilateralToSquare(a,b,c,d,e,f,g,h),r=this.squareToQuadrilateral(i,j,k,l,m,n,o,p);return r.times(q)},n.squareToQuadrilateral=function(a,b,c,d,e,f,g,h){var i=h-f,j=b-d+f-h;if(0==i&&0==j)return new n(c-a,e-c,a,d-b,f-d,b,0,0,1);var k=c-e,l=g-e,m=a-c+e-g,o=d-f,p=k*i-l*o,q=(m*i-l*j)/p,r=(k*j-m*o)/p;return new n(c-a+q*c,g-a+r*g,a,d-b+q*d,h-b+r*h,b,q,r,1)},n.quadrilateralToSquare=function(a,b,c,d,e,f,g,h){return this.squareToQuadrilateral(a,b,c,d,e,f,g,h).buildAdjoint()},p.prototype.sizeOfBlackWhiteBlackRun=function(a,b,c,d){var e=Math.abs(d-b)>Math.abs(c-a);if(e){var f=a;a=b,b=f,f=c,c=d,d=f}for(var g=Math.abs(c-a),h=Math.abs(d-b),i=-g>>1,j=b<d?1:-1,k=a<c?1:-1,l=0,m=a,n=b;m!=c;m+=k){var o=e?n:m,p=e?m:n;if(1==l?this.image.data[o+p*this.image.width]&&l++:this.image.data[o+p*this.image.width]||l++,3==l){var q=m-a,r=n-b;return Math.sqrt(q*q+r*r)}if(i+=h,i>0){if(n==d)break;n+=j,i-=g}}var s=c-a,t=d-b;return Math.sqrt(s*s+t*t)},p.prototype.sizeOfBlackWhiteBlackRunBothWays=function(a,b,c,d){var e=this.sizeOfBlackWhiteBlackRun(a,b,c,d),f=1,g=a-(c-a);g<0?(f=a/(a-g),g=0):g>=this.image.width&&(f=(this.image.width-1-a)/(g-a),g=this.image.width-1);var h=Math.floor(b-(d-b)*f);return f=1,h<0?(f=b/(b-h),h=0):h>=this.image.height&&(f=(this.image.height-1-b)/(h-b),h=this.image.height-1),g=Math.floor(a+(g-a)*f),e+=this.sizeOfBlackWhiteBlackRun(a,b,g,h),e-1},p.prototype.calculateModuleSizeOneWay=function(a,b){var c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.X),Math.floor(a.Y),Math.floor(b.X),Math.floor(b.Y)),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(b.X),Math.floor(b.Y),Math.floor(a.X),Math.floor(a.Y));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14},p.prototype.calculateModuleSize=function(a,b,c){return(this.calculateModuleSizeOneWay(a,b)+this.calculateModuleSizeOneWay(a,c))/2},p.prototype.distance=function(a,b){var c=a.X-b.X,d=a.Y-b.Y;return Math.sqrt(c*c+d*d)},p.prototype.computeDimension=function(a,b,c,d){var e=Math.round(this.distance(a,b)/d),f=Math.round(this.distance(a,c)/d),g=(e+f>>1)+7;switch(3&g){case 0:g++;break;case 2:g--;break;case 3:throw"Error"}return g},p.prototype.findAlignmentInRegion=function(a,b,c,d){var e=Math.floor(d*a),f=Math.max(0,b-e),g=Math.min(this.image.width-1,b+e);if(g-f<3*a)throw"Error";var h=Math.max(0,c-e),j=Math.min(this.image.height-1,c+e),k=new i(this.image,f,h,g-f,j-h,a,this.resultPointCallback);return k.find()},p.prototype.createTransform=function(a,b,c,d,e){var f,g,h,i,j=e-3.5;null!=d?(f=d.X,g=d.Y,h=i=j-3):(f=b.X-a.X+c.X,g=b.Y-a.Y+c.Y,h=i=j);var k=n.quadrilateralToQuadrilateral(3.5,3.5,j,3.5,h,i,3.5,j,a.X,a.Y,b.X,b.Y,f,g,c.X,c.Y);return k},p.prototype.sampleGrid=function(a,b,c){var d=K;return d.sampleGrid3(a,c,b)},p.prototype.processFinderPatternInfo=function(a){var b=a.topLeft,c=a.topRight,d=a.bottomLeft,e=this.calculateModuleSize(b,c,d);if(e<1)throw"Error";var g=this.computeDimension(b,c,d,e),h=f.getProvisionalVersionForDimension(g),i=h.DimensionForVersion-7,j=null;if(h.alignmentPatternCenters.length>0)for(var k=c.X-b.X+d.X,l=c.Y-b.Y+d.Y,m=1-3/i,n=Math.floor(b.X+m*(k-b.X)),p=Math.floor(b.Y+m*(l-b.Y)),q=4;q<=16;q<<=1){j=this.findAlignmentInRegion(e,n,p,q);break}var r,s=this.createTransform(b,c,d,j,g),t=this.sampleGrid(this.image,s,g);return r=null==j?[d,b,c]:[d,b,c,j],new o(t,r)},p.prototype.detect=function(){var a=(new m).findFinderPattern(this.image);return this.processFinderPatternInfo(a)},Object.defineProperty(q.prototype,"Zero",{get:function(){return 0==this.coefficients[0]}}),Object.defineProperty(q.prototype,"Degree",{get:function(){return this.coefficients.length-1}}),q.prototype.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},q.prototype.evaluateAt=function(a){if(0==a)return this.getCoefficient(0);var b=this.coefficients.length;if(1==a){for(var c=0,d=0;d<b;d++)c=r.addOrSubtract(c,this.coefficients[d]);return c}for(var e=this.coefficients[0],d=1;d<b;d++)e=r.addOrSubtract(this.field.multiply(a,e),this.coefficients[d]);return e},q.prototype.addOrSubtract=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return a;if(a.Zero)return this;var b=this.coefficients,c=a.coefficients;if(b.length>c.length){var d=b;b=c,c=d}for(var e=new Array(c.length),f=c.length-b.length,g=0;g<f;g++)e[g]=c[g];for(var h=f;h<c.length;h++)e[h]=r.addOrSubtract(b[h-f],c[h]);return new q(this.field,e)},q.prototype.multiply1=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||a.Zero)return this.field.Zero;for(var b=this.coefficients,c=b.length,d=a.coefficients,e=d.length,f=new Array(c+e-1),g=0;g<c;g++)for(var h=b[g],i=0;i<e;i++)f[g+i]=r.addOrSubtract(f[g+i],this.field.multiply(h,d[i]));return new q(this.field,f)},q.prototype.multiply2=function(a){if(0==a)return this.field.Zero;if(1==a)return this;for(var b=this.coefficients.length,c=new Array(b),d=0;d<b;d++)c[d]=this.field.multiply(this.coefficients[d],a);return new q(this.field,c)},q.prototype.multiplyByMonomial=function(a,b){if(a<0)throw"System.ArgumentException";if(0==b)return this.field.Zero;for(var c=this.coefficients.length,d=new Array(c+a),e=0;e<d.length;e++)d[e]=0;for(var e=0;e<c;e++)d[e]=this.field.multiply(this.coefficients[e],b);return new q(this.field,d)},q.prototype.divide=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(a.Zero)throw"Divide by 0";for(var b=this.field.Zero,c=this,d=a.getCoefficient(a.Degree),e=this.field.inverse(d);c.Degree>=a.Degree&&!c.Zero;){var f=c.Degree-a.Degree,g=this.field.multiply(c.getCoefficient(c.Degree),e),h=a.multiplyByMonomial(f,g),i=this.field.buildMonomial(f,g);b=b.addOrSubtract(i),c=c.addOrSubtract(h)}return[b,c]},Object.defineProperty(r.prototype,"Zero",{get:function(){return this.zero}}),Object.defineProperty(r.prototype,"One",{get:function(){return this.one}}),r.prototype.buildMonomial=function(a,b){if(a<0)throw"System.ArgumentException";if(0==b)return this.zero;for(var c=new Array(a+1),d=0;d<c.length;d++)c[d]=0;return c[0]=b,new q(this,c)},r.prototype.exp=function(a){return this.expTable[a]},r.prototype.log=function(a){if(0==a)throw"System.ArgumentException";return this.logTable[a]},r.prototype.inverse=function(a){if(0==a)throw"System.ArithmeticException";return this.expTable[255-this.logTable[a]]},r.prototype.multiply=function(a,b){return 0==a||0==b?0:1==a?b:1==b?a:this.expTable[(this.logTable[a]+this.logTable[b])%255]},r.QR_CODE_FIELD=new r(285),r.DATA_MATRIX_FIELD=new r(301),r.addOrSubtract=function(a,b){return a^b},s.prototype.decode=function(a,b){for(var c=new q(this.field,a),d=new Array(b),e=0;e<d.length;e++)d[e]=0;for(var f=!1,g=!0,e=0;e<b;e++){var h=c.evaluateAt(this.field.exp(f?e+1:e));d[d.length-1-e]=h,0!=h&&(g=!1)}if(!g)for(var i=new q(this.field,d),j=this.runEuclideanAlgorithm(this.field.buildMonomial(b,1),i,b),k=j[0],l=j[1],m=this.findErrorLocations(k),n=this.findErrorMagnitudes(l,m,f),e=0;e<m.length;e++){var o=a.length-1-this.field.log(m[e]);if(o<0)throw"ReedSolomonException Bad error location";a[o]=r.addOrSubtract(a[o],n[e])}},s.prototype.runEuclideanAlgorithm=function(a,b,c){if(a.Degree<b.Degree){var d=a;a=b,b=d}for(var e=a,f=b,g=this.field.One,h=this.field.Zero,i=this.field.Zero,j=this.field.One;f.Degree>=Math.floor(c/2);){var k=e,l=g,m=i;if(e=f,g=h,i=j,e.Zero)throw"r_{i-1} was zero";f=k;for(var n=this.field.Zero,o=e.getCoefficient(e.Degree),p=this.field.inverse(o);f.Degree>=e.Degree&&!f.Zero;){var q=f.Degree-e.Degree,r=this.field.multiply(f.getCoefficient(f.Degree),p);n=n.addOrSubtract(this.field.buildMonomial(q,r)),f=f.addOrSubtract(e.multiplyByMonomial(q,r))}h=n.multiply1(g).addOrSubtract(l),j=n.multiply1(i).addOrSubtract(m)}var s=j.getCoefficient(0);if(0==s)throw"ReedSolomonException sigmaTilde(0) was zero";var t=this.field.inverse(s),u=j.multiply2(t),v=f.multiply2(t);return[u,v]},s.prototype.findErrorLocations=function(a){var b=a.Degree;if(1==b)return new Array(a.getCoefficient(1));for(var c=new Array(b),d=0,e=1;e<256&&d<b;e++)0==a.evaluateAt(e)&&(c[d]=this.field.inverse(e),d++);if(d!=b)throw"Error locator degree does not match number of roots";return c},s.prototype.findErrorMagnitudes=function(a,b,c){for(var d=b.length,e=new Array(d),f=0;f<d;f++){for(var g=this.field.inverse(b[f]),h=1,i=0;i<d;i++)f!=i&&(h=this.field.multiply(h,r.addOrSubtract(1,this.field.multiply(b[i],g))));e[f]=this.field.multiply(a.evaluateAt(g),this.field.inverse(h)),c&&(e[f]=this.field.multiply(e[f],g))}return e};var P={};P.forReference=function(a){if(a<0||a>7)throw"System.ArgumentException";return P.DATA_MASKS[a]},P.DATA_MASKS=[new t,new u,new v,new w,new x,new y,new z,new A],B.prototype.copyBit=function(a,b,c){return this.bitMatrix.get_Renamed(a,b)?c<<1|1:c<<1},B.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var a=0,c=0;c<6;c++)a=this.copyBit(c,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(var d=5;d>=0;d--)a=this.copyBit(8,d,a);if(this.parsedFormatInfo=b.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var e=this.bitMatrix.Dimension;a=0;for(var f=e-8,c=e-1;c>=f;c--)a=this.copyBit(c,8,a);for(var d=e-7;d<e;d++)a=this.copyBit(8,d,a);if(this.parsedFormatInfo=b.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},B.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var a=this.bitMatrix.Dimension,b=a-17>>2;if(b<=6)return f.getVersionForNumber(b);for(var c=0,d=a-11,e=5;e>=0;e--)for(var g=a-9;g>=d;g--)c=this.copyBit(g,e,c);if(this.parsedVersion=f.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;c=0;for(var g=5;g>=0;g--)for(var e=a-9;e>=d;e--)c=this.copyBit(g,e,c);if(this.parsedVersion=f.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;throw"Error readVersion"},B.prototype.readCodewords=function(){var a=this.readFormatInformation(),b=this.readVersion(),c=P.forReference(a.dataMask),d=this.bitMatrix.Dimension;c.unmaskBitMatrix(this.bitMatrix,d);for(var e=b.buildFunctionPattern(),f=!0,g=new Array(b.totalCodewords),h=0,i=0,j=0,k=d-1;k>0;k-=2){6==k&&k--;for(var l=0;l<d;l++)for(var m=f?d-1-l:l,n=0;n<2;n++)e.get_Renamed(k-n,m)||(j++,i<<=1,this.bitMatrix.get_Renamed(k-n,m)&&(i|=1),8==j&&(g[h++]=i,j=0,i=0));f^=!0}if(h!=b.totalCodewords)throw"Error readCodewords";return g},C.getDataBlocks=function(a,b,c){if(a.length!=b.totalCodewords)throw"ArgumentException";for(var d=b.getECBlocksForLevel(c),e=0,f=d.getECBlocks(),g=0;g<f.length;g++)e+=f[g].count;for(var h=new Array(e),i=0,j=0;j<f.length;j++)for(var k=f[j],g=0;g<k.count;g++){var l=k.dataCodewords,m=d.ecCodewordsPerBlock+l;h[i++]=new C(l,new Array(m))}for(var n=h[0].codewords.length,o=h.length-1;o>=0;){var p=h[o].codewords.length;if(p==n)break;o--}o++;for(var q=n-d.ecCodewordsPerBlock,r=0,g=0;g<q;g++)for(var j=0;j<i;j++)h[j].codewords[g]=a[r++];for(var j=o;j<i;j++)h[j].codewords[q]=a[r++];for(var s=h[0].codewords.length,g=q;g<s;g++)for(var j=0;j<i;j++){var t=j<o?g:g+1;h[j].codewords[t]=a[r++]}return h},D.prototype.getNextBits=function(a){var b=0;if(a<this.bitPointer+1){for(var c=0,d=0;d<a;d++)c+=1<<d;return c<<=this.bitPointer-a+1,b=(this.blocks[this.blockPointer]&c)>>this.bitPointer-a+1,this.bitPointer-=a,b}if(a<this.bitPointer+1+8){for(var e=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;return b=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1),this.blockPointer++,b+=this.blocks[this.blockPointer]>>8-(a-(this.bitPointer+1)),this.bitPointer=this.bitPointer-a%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}if(a<this.bitPointer+1+16){for(var e=0,f=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;var g=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1);this.blockPointer++;var h=this.blocks[this.blockPointer]<<a-(this.bitPointer+1+8);this.blockPointer++;for(var d=0;d<a-(this.bitPointer+1+8);d++)f+=1<<d;f<<=8-(a-(this.bitPointer+1+8));var i=(this.blocks[this.blockPointer]&f)>>8-(a-(this.bitPointer+1+8));return b=g+h+i,this.bitPointer=this.bitPointer-(a-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}return 0},D.prototype.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},D.prototype.getDataLength=function(a){for(var b=0;;){if(a>>b==1)break;b++}return this.getNextBits(R.sizeOfDataLengthInfo[this.dataLengthMode][b])},D.prototype.getRomanAndFigureString=function(a){var b=a,c=0,d="",e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];do if(b>1){c=this.getNextBits(11);var f=Math.floor(c/45),g=c%45;d+=e[f],d+=e[g],b-=2}else 1==b&&(c=this.getNextBits(6),d+=e[c],b-=1);while(b>0);return d},D.prototype.getFigureString=function(a){var b=a,c=0,d="";do b>=3?(c=this.getNextBits(10),c<100&&(d+="0"),c<10&&(d+="0"),b-=3):2==b?(c=this.getNextBits(7),c<10&&(d+="0"),b-=2):1==b&&(c=this.getNextBits(4),b-=1),d+=c;while(b>0);return d},D.prototype.get8bitByteArray=function(a){var b=a,c=0,d=[];do c=this.getNextBits(8),d.push(c),b--;while(b>0);return d},D.prototype.getKanjiString=function(a){var b=a,c=0,d="";do{c=this.getNextBits(13);var e=c%192,f=c/192,g=(f<<8)+e,h=0;h=g+33088<=40956?g+33088:g+49472,d+=String.fromCharCode(h),b--}while(b>0);return d},Object.defineProperty(D.prototype,"DataByte",{get:function(){for(var a=[],b=1,c=2,d=4,e=8;;){var f=this.NextMode();if(0==f){if(a.length>0)break;throw"Empty data block"}if(f!=b&&f!=c&&f!=d&&f!=e)throw"Invalid mode: "+f+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";var g=this.getDataLength(f);if(g<1)throw"Invalid data length: "+g;switch(f){case b:for(var h=this.getFigureString(g),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h.charCodeAt(j);a.push(i);break;case c:for(var h=this.getRomanAndFigureString(g),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h.charCodeAt(j);a.push(i);break;case d:var k=this.get8bitByteArray(g);a.push(k);break;case e:var h=this.getKanjiString(g);a.push(h)}}return a}});var Q={};Q.rsDecoder=new s(r.QR_CODE_FIELD),Q.correctErrors=function(a,b){for(var c=a.length,d=new Array(c),e=0;e<c;e++)d[e]=255&a[e];var f=a.length-b;try{Q.rsDecoder.decode(d,f)}catch(a){throw a}for(var e=0;e<b;e++)a[e]=d[e]},Q.decode=function(a){for(var b=new B(a),c=b.readVersion(),d=b.readFormatInformation().errorCorrectionLevel,e=b.readCodewords(),f=C.getDataBlocks(e,c,d),g=0,h=0;h<f.length;h++)g+=f[h].numDataCodewords;for(var i=new Array(g),j=0,k=0;k<f.length;k++){var l=f[k],m=l.codewords,n=l.numDataCodewords;Q.correctErrors(m,n);for(var h=0;h<n;h++)i[j++]=m[h]}var o=new D(i,c.versionNumber,d.bits);return o};var R={};return R.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],E.prototype.decode=function(a,b){var c=function(){try{this.error=void 0,this.result=this.process(this.imagedata)}catch(a){this.error=a,this.result=void 0}return null!=this.callback&&this.callback(this.result,this.error),this.result}.bind(this);if(void 0==a){var d=document.getElementById("qr-canvas"),e=d.getContext("2d");this.width=d.width,this.height=d.height,this.imagedata=e.getImageData(0,0,this.width,this.height),c()}else if(void 0!=a.width)this.width=a.width,this.height=a.height,this.imagedata={data:b||a.data},this.imagedata.width=a.width,this.imagedata.height=a.height,c();else{var f=new Image;f.crossOrigin="Anonymous",f.onload=function(){var a=document.createElement("canvas"),b=a.getContext("2d"),d=document.getElementById("out-canvas");if(null!=d){var e=d.getContext("2d");e.clearRect(0,0,320,240),e.drawImage(f,0,0,320,240)}a.width=f.width,a.height=f.height,b.drawImage(f,0,0),this.width=f.width,this.height=f.height;try{this.imagedata=b.getImageData(0,0,f.width,f.height)}catch(a){if(this.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",null!=this.callback)return this.callback(this.result)}c()}.bind(this),f.src=a}},E.prototype.decode_utf8=function(a){return decodeURIComponent(escape(a))},E.prototype.process=function(a){for(var b=((new Date).getTime(),this.grayScaleToBitmap(this.grayscale(a))),c=new p(b),d=c.detect(),e=Q.decode(d.bits),f=e.DataByte,g="",h=0;h<f.length;h++)for(var i=0;i<f[h].length;i++)g+=String.fromCharCode(f[h][i]);(new Date).getTime();return this.debug,this.decode_utf8(g)},E.prototype.getPixel=function(a,b,c){if(a.width<b)throw"point error";if(a.height<c)throw"point error";var d=4*b+c*a.width*4;return(33*a.data[d]+34*a.data[d+1]+33*a.data[d+2])/100},E.prototype.binarize=function(a){for(var b=new Array(this.width*this.height),c=0;c<this.height;c++)for(var d=0;d<this.width;d++){var e=this.getPixel(d,c);b[d+c*this.width]=e<=a}return b},E.prototype.getMiddleBrightnessPerArea=function(a){for(var b=4,c=Math.floor(a.width/b),d=Math.floor(a.height/b),e=new Array(b),f=0;f<b;f++){e[f]=new Array(b);for(var g=0;g<b;g++)e[f][g]=[0,0]}for(var h=0;h<b;h++)for(var i=0;i<b;i++){e[i][h][0]=255;for(var j=0;j<d;j++)for(var k=0;k<c;k++){var l=a.data[c*i+k+(d*h+j)*a.width];l<e[i][h][0]&&(e[i][h][0]=l),l>e[i][h][1]&&(e[i][h][1]=l)}}for(var m=new Array(b),n=0;n<b;n++)m[n]=new Array(b);for(var h=0;h<b;h++)for(var i=0;i<b;i++)m[i][h]=Math.floor((e[i][h][0]+e[i][h][1])/2);return m},E.prototype.grayScaleToBitmap=function(a){for(var b=this.getMiddleBrightnessPerArea(a),c=b.length,d=Math.floor(a.width/c),e=Math.floor(a.height/c),f=0;f<c;f++)for(var g=0;g<c;g++)for(var h=0;h<e;h++)for(var i=0;i<d;i++)a.data[d*g+i+(e*f+h)*a.width]=a.data[d*g+i+(e*f+h)*a.width]<b[g][f];return a},E.prototype.grayscale=function(a){for(var b=new Array(a.width*a.height),c=0;c<a.height;c++)for(var d=0;d<a.width;d++){var e=this.getPixel(a,d,c);b[d+c*a.width]=e}return{height:a.height,width:a.width,data:b}},E}),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.QrCode=b()}(this,function(){function a(a,b,c){this.ordinal_Renamed_Field=a,this.bits=b,this.name=c}function b(b){this.errorCorrectionLevel=a.forBits(b>>3&3),this.dataMask=7&b}function c(a,b){if(b||(b=a),a<1||b<1)throw"Both dimensions must be greater than 0";this.width=a,this.height=b;var c=a>>5;0!=(31&a)&&c++,this.rowSize=c,this.bits=new Array(c*b);for(var d=0;d<this.bits.length;d++)this.bits[d]=0}function d(a,b){this.count=a,this.dataCodewords=b}function e(a,b,c){this.ecCodewordsPerBlock=a,c?this.ecBlocks=[b,c]:this.ecBlocks=[b]}function f(a,b,c,d,e,f){this.versionNumber=a,this.alignmentPatternCenters=b,this.ecBlocks=[c,d,e,f];for(var g=0,h=c.ecCodewordsPerBlock,i=c.getECBlocks(),j=0;j<i.length;j++){var k=i[j];g+=k.count*(k.dataCodewords+h)}this.totalCodewords=g}function g(){return[new f(1,[],new e(7,new d(1,19)),new e(10,new d(1,16)),new e(13,new d(1,13)),new e(17,new d(1,9))),new f(2,[6,18],new e(10,new d(1,34)),new e(16,new d(1,28)),new e(22,new d(1,22)),new e(28,new d(1,16))),new f(3,[6,22],new e(15,new d(1,55)),new e(26,new d(1,44)),new e(18,new d(2,17)),new e(22,new d(2,13))),new f(4,[6,26],new e(20,new d(1,80)),new e(18,new d(2,32)),new e(26,new d(2,24)),new e(16,new d(4,9))),new f(5,[6,30],new e(26,new d(1,108)),new e(24,new d(2,43)),new e(18,new d(2,15),new d(2,16)),new e(22,new d(2,11),new d(2,12))),new f(6,[6,34],new e(18,new d(2,68)),new e(16,new d(4,27)),new e(24,new d(4,19)),new e(28,new d(4,15))),new f(7,[6,22,38],new e(20,new d(2,78)),new e(18,new d(4,31)),new e(18,new d(2,14),new d(4,15)),new e(26,new d(4,13),new d(1,14))),new f(8,[6,24,42],new e(24,new d(2,97)),new e(22,new d(2,38),new d(2,39)),new e(22,new d(4,18),new d(2,19)),new e(26,new d(4,14),new d(2,15))),new f(9,[6,26,46],new e(30,new d(2,116)),new e(22,new d(3,36),new d(2,37)),new e(20,new d(4,16),new d(4,17)),new e(24,new d(4,12),new d(4,13))),new f(10,[6,28,50],new e(18,new d(2,68),new d(2,69)),new e(26,new d(4,43),new d(1,44)),new e(24,new d(6,19),new d(2,20)),new e(28,new d(6,15),new d(2,16))),new f(11,[6,30,54],new e(20,new d(4,81)),new e(30,new d(1,50),new d(4,51)),new e(28,new d(4,22),new d(4,23)),new e(24,new d(3,12),new d(8,13))),new f(12,[6,32,58],new e(24,new d(2,92),new d(2,93)),new e(22,new d(6,36),new d(2,37)),new e(26,new d(4,20),new d(6,21)),new e(28,new d(7,14),new d(4,15))),new f(13,[6,34,62],new e(26,new d(4,107)),new e(22,new d(8,37),new d(1,38)),new e(24,new d(8,20),new d(4,21)),new e(22,new d(12,11),new d(4,12))),new f(14,[6,26,46,66],new e(30,new d(3,115),new d(1,116)),new e(24,new d(4,40),new d(5,41)),new e(20,new d(11,16),new d(5,17)),new e(24,new d(11,12),new d(5,13))),new f(15,[6,26,48,70],new e(22,new d(5,87),new d(1,88)),new e(24,new d(5,41),new d(5,42)),new e(30,new d(5,24),new d(7,25)),new e(24,new d(11,12),new d(7,13))),new f(16,[6,26,50,74],new e(24,new d(5,98),new d(1,99)),new e(28,new d(7,45),new d(3,46)),new e(24,new d(15,19),new d(2,20)),new e(30,new d(3,15),new d(13,16))),new f(17,[6,30,54,78],new e(28,new d(1,107),new d(5,108)),new e(28,new d(10,46),new d(1,47)),new e(28,new d(1,22),new d(15,23)),new e(28,new d(2,14),new d(17,15))),new f(18,[6,30,56,82],new e(30,new d(5,120),new d(1,121)),new e(26,new d(9,43),new d(4,44)),new e(28,new d(17,22),new d(1,23)),new e(28,new d(2,14),new d(19,15))),new f(19,[6,30,58,86],new e(28,new d(3,113),new d(4,114)),new e(26,new d(3,44),new d(11,45)),new e(26,new d(17,21),new d(4,22)),new e(26,new d(9,13),new d(16,14))),new f(20,[6,34,62,90],new e(28,new d(3,107),new d(5,108)),new e(26,new d(3,41),new d(13,42)),new e(30,new d(15,24),new d(5,25)),new e(28,new d(15,15),new d(10,16))),new f(21,[6,28,50,72,94],new e(28,new d(4,116),new d(4,117)),new e(26,new d(17,42)),new e(28,new d(17,22),new d(6,23)),new e(30,new d(19,16),new d(6,17))),new f(22,[6,26,50,74,98],new e(28,new d(2,111),new d(7,112)),new e(28,new d(17,46)),new e(30,new d(7,24),new d(16,25)),new e(24,new d(34,13))),new f(23,[6,30,54,74,102],new e(30,new d(4,121),new d(5,122)),new e(28,new d(4,47),new d(14,48)),new e(30,new d(11,24),new d(14,25)),new e(30,new d(16,15),new d(14,16))),new f(24,[6,28,54,80,106],new e(30,new d(6,117),new d(4,118)),new e(28,new d(6,45),new d(14,46)),new e(30,new d(11,24),new d(16,25)),new e(30,new d(30,16),new d(2,17))),new f(25,[6,32,58,84,110],new e(26,new d(8,106),new d(4,107)),new e(28,new d(8,47),new d(13,48)),new e(30,new d(7,24),new d(22,25)),new e(30,new d(22,15),new d(13,16))),new f(26,[6,30,58,86,114],new e(28,new d(10,114),new d(2,115)),new e(28,new d(19,46),new d(4,47)),new e(28,new d(28,22),new d(6,23)),new e(30,new d(33,16),new d(4,17))),new f(27,[6,34,62,90,118],new e(30,new d(8,122),new d(4,123)),new e(28,new d(22,45),new d(3,46)),new e(30,new d(8,23),new d(26,24)),new e(30,new d(12,15),new d(28,16))),new f(28,[6,26,50,74,98,122],new e(30,new d(3,117),new d(10,118)),new e(28,new d(3,45),new d(23,46)),new e(30,new d(4,24),new d(31,25)),new e(30,new d(11,15),new d(31,16))),new f(29,[6,30,54,78,102,126],new e(30,new d(7,116),new d(7,117)),new e(28,new d(21,45),new d(7,46)),new e(30,new d(1,23),new d(37,24)),new e(30,new d(19,15),new d(26,16))),new f(30,[6,26,52,78,104,130],new e(30,new d(5,115),new d(10,116)),new e(28,new d(19,47),new d(10,48)),new e(30,new d(15,24),new d(25,25)),new e(30,new d(23,15),new d(25,16))),new f(31,[6,30,56,82,108,134],new e(30,new d(13,115),new d(3,116)),new e(28,new d(2,46),new d(29,47)),new e(30,new d(42,24),new d(1,25)),new e(30,new d(23,15),new d(28,16))),new f(32,[6,34,60,86,112,138],new e(30,new d(17,115)),new e(28,new d(10,46),new d(23,47)),new e(30,new d(10,24),new d(35,25)),new e(30,new d(19,15),new d(35,16))),new f(33,[6,30,58,86,114,142],new e(30,new d(17,115),new d(1,116)),new e(28,new d(14,46),new d(21,47)),new e(30,new d(29,24),new d(19,25)),new e(30,new d(11,15),new d(46,16))),new f(34,[6,34,62,90,118,146],new e(30,new d(13,115),new d(6,116)),new e(28,new d(14,46),new d(23,47)),new e(30,new d(44,24),new d(7,25)),new e(30,new d(59,16),new d(1,17))),new f(35,[6,30,54,78,102,126,150],new e(30,new d(12,121),new d(7,122)),new e(28,new d(12,47),new d(26,48)),new e(30,new d(39,24),new d(14,25)),new e(30,new d(22,15),new d(41,16))),new f(36,[6,24,50,76,102,128,154],new e(30,new d(6,121),new d(14,122)),new e(28,new d(6,47),new d(34,48)),new e(30,new d(46,24),new d(10,25)),new e(30,new d(2,15),new d(64,16))),new f(37,[6,28,54,80,106,132,158],new e(30,new d(17,122),new d(4,123)),new e(28,new d(29,46),new d(14,47)),new e(30,new d(49,24),new d(10,25)),new e(30,new d(24,15),new d(46,16))),new f(38,[6,32,58,84,110,136,162],new e(30,new d(4,122),new d(18,123)),new e(28,new d(13,46),new d(32,47)),new e(30,new d(48,24),new d(14,25)),new e(30,new d(42,15),new d(32,16))),new f(39,[6,26,54,82,110,138,166],new e(30,new d(20,117),new d(4,118)),new e(28,new d(40,47),new d(7,48)),new e(30,new d(43,24),new d(22,25)),new e(30,new d(10,15),new d(67,16))),new f(40,[6,30,58,86,114,142,170],new e(30,new d(19,118),new d(6,119)),new e(28,new d(18,47),new d(31,48)),new e(30,new d(34,24),new d(34,25)),new e(30,new d(20,15),new d(61,16)))];
}function h(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c}function i(a,b,c,d,e,f,g){this.image=a,this.possibleCenters=[],this.startX=b,this.startY=c,this.width=d,this.height=e,this.moduleSize=f,this.crossCheckStateCount=[0,0,0],this.resultPointCallback=g}function j(a){function b(a,b){var c=a.X-b.X,d=a.Y-b.Y;return Math.sqrt(c*c+d*d)}function c(a,b,c){var d=b.x,e=b.y;return(c.x-d)*(a.y-e)-(c.y-e)*(a.x-d)}var d,e,f,g=b(a[0],a[1]),h=b(a[1],a[2]),i=b(a[0],a[2]);if(h>=g&&h>=i?(e=a[0],d=a[1],f=a[2]):i>=h&&i>=g?(e=a[1],d=a[0],f=a[2]):(e=a[2],d=a[0],f=a[1]),c(d,e,f)<0){var j=d;d=f,f=j}a[0]=d,a[1]=e,a[2]=f}function k(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c}function l(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}function m(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=[0,0,0,0,0],this.resultPointCallback=null}function n(a,b,c,d,e,f,g,h,i){this.a11=a,this.a12=d,this.a13=g,this.a21=b,this.a22=e,this.a23=h,this.a31=c,this.a32=f,this.a33=i}function o(a,b){this.bits=a,this.points=b}function p(a){this.image=a,this.resultPointCallback=null}function q(a,b){if(null==b||0==b.length)throw"System.ArgumentException";this.field=a;var c=b.length;if(c>1&&0==b[0]){for(var d=1;d<c&&0==b[d];)d++;if(d==c)this.coefficients=a.Zero.coefficients;else{this.coefficients=new Array(c-d);for(var e=0;e<this.coefficients.length;e++)this.coefficients[e]=0;for(var f=0;f<this.coefficients.length;f++)this.coefficients[f]=b[d+f]}}else this.coefficients=b}function r(a){this.expTable=new Array(256),this.logTable=new Array(256);for(var b=1,c=0;c<256;c++)this.expTable[c]=b,b<<=1,b>=256&&(b^=a);for(var c=0;c<255;c++)this.logTable[this.expTable[c]]=c;var d=new Array(1);d[0]=0,this.zero=new q(this,new Array(d));var e=new Array(1);e[0]=1,this.one=new q(this,new Array(e))}function s(a){this.field=a}function t(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(a+b&1)}}function u(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(1&a)}}function v(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return b%3==0}}function w(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return(a+b)%3==0}}function x(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(F(a,1)+b/3&1)}}function y(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return(1&c)+c%3==0}}function z(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return 0==((1&c)+c%3&1)}}function A(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==((a+b&1)+a*b%3&1)}}function B(a){var b=a.Dimension;if(b<21||1!=(3&b))throw"Error BitMatrixParser";this.bitMatrix=a,this.parsedVersion=null,this.parsedFormatInfo=null}function C(a,b){this.numDataCodewords=a,this.codewords=b}function D(a,b,c){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=a,this.numErrorCorrectionCode=c,b<=9?this.dataLengthMode=0:b>=10&&b<=26?this.dataLengthMode=1:b>=27&&b<=40&&(this.dataLengthMode=2)}function E(){this.imagedata=null,this.width=0,this.height=0,this.qrCodeSymbol=null,this.debug=!1,this.callback=null}function F(a,b){return a>=0?a>>b:(a>>b)+(2<<~b)}a.prototype.ordinal=function(){return this.ordinal_Renamed_Field},a.forBits=function(a){if(a<0||a>=G.length)throw"ArgumentException";return G[a]};var G=[new a(1,0,"M"),new a(0,1,"L"),new a(3,2,"H"),new a(2,3,"Q")],H=21522,I=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]],J=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4];b.prototype.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask},b.prototype.Equals=function(a){var b=a;return this.errorCorrectionLevel==b.errorCorrectionLevel&&this.dataMask==b.dataMask},b.numBitsDiffering=function(a,b){return a^=b,J[15&a]+J[15&F(a,4)]+J[15&F(a,8)]+J[15&F(a,12)]+J[15&F(a,16)]+J[15&F(a,20)]+J[15&F(a,24)]+J[15&F(a,28)]},b.decodeFormatInformation=function(a){var c=b.doDecodeFormatInformation(a);return null!=c?c:b.doDecodeFormatInformation(a^H)},b.doDecodeFormatInformation=function(a){for(var c=4294967295,d=0,e=0;e<I.length;e++){var f=I[e],g=f[0];if(g==a)return new b(f[1]);var h=this.numBitsDiffering(a,g);h<c&&(d=f[1],c=h)}return c<=3?new b(d):null},Object.defineProperty(c.prototype,"Dimension",{get:function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}}),c.prototype.get_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);return 0!=(1&F(this.bits[c],31&a))},c.prototype.set_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]|=1<<(31&a)},c.prototype.flip=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]^=1<<(31&a)},c.prototype.clear=function(){for(var a=this.bits.length,b=0;b<a;b++)this.bits[b]=0},c.prototype.setRegion=function(a,b,c,d){if(b<0||a<0)throw"Left and top must be nonnegative";if(d<1||c<1)throw"Height and width must be at least 1";var e=a+c,f=b+d;if(f>this.height||e>this.width)throw"The region must fit inside the matrix";for(var g=b;g<f;g++)for(var h=g*this.rowSize,i=a;i<e;i++)this.bits[h+(i>>5)]|=1<<(31&i)},Object.defineProperty(e.prototype,"TotalECCodewords",{get:function(){return this.ecCodewordsPerBlock*this.NumBlocks}}),Object.defineProperty(e.prototype,"NumBlocks",{get:function(){for(var a=0,b=0;b<this.ecBlocks.length;b++)a+=this.ecBlocks[b].length;return a}}),e.prototype.getECBlocks=function(){return this.ecBlocks},Object.defineProperty(f.prototype,"DimensionForVersion",{get:function(){return 17+4*this.versionNumber}}),f.prototype.buildFunctionPattern=function(){var a=this.DimensionForVersion,b=new c(a);b.setRegion(0,0,9,9),b.setRegion(a-8,0,8,9),b.setRegion(0,a-8,9,8);for(var d=this.alignmentPatternCenters.length,e=0;e<d;e++)for(var f=this.alignmentPatternCenters[e]-2,g=0;g<d;g++)0==e&&(0==g||g==d-1)||e==d-1&&0==g||b.setRegion(this.alignmentPatternCenters[g]-2,f,5,5);return b.setRegion(6,9,1,a-17),b.setRegion(9,6,a-17,1),this.versionNumber>6&&(b.setRegion(a-11,0,3,6),b.setRegion(0,a-11,6,3)),b},f.prototype.getECBlocksForLevel=function(a){return this.ecBlocks[a.ordinal()]},f.VERSION_DECODE_INFO=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017],f.VERSIONS=g(),f.getVersionForNumber=function(a){if(a<1||a>40)throw"ArgumentException";return f.VERSIONS[a-1]},f.getProvisionalVersionForDimension=function(a){if(a%4!=1)throw"Error getProvisionalVersionForDimension";try{return f.getVersionForNumber(a-17>>2)}catch(a){throw"Error getVersionForNumber"}},f.decodeVersionInformation=function(a){for(var c=4294967295,d=0,e=0;e<f.VERSION_DECODE_INFO.length;e++){var g=f.VERSION_DECODE_INFO[e];if(g==a)return this.getVersionForNumber(e+7);var h=b.numBitsDiffering(a,g);h<c&&(d=e+7,c=h)}return c<=3?this.getVersionForNumber(d):null},Object.defineProperty(h.prototype,"X",{get:function(){return Math.floor(this.x)}}),Object.defineProperty(h.prototype,"Y",{get:function(){return Math.floor(this.y)}}),h.prototype.incrementCount=function(){this.count++},h.prototype.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return d<=1||d/this.estimatedModuleSize<=1}return!1},i.prototype.centerFromEnd=function(a,b){return b-a[2]-a[1]/2},i.prototype.foundPatternCross=function(a){for(var b=this.moduleSize,c=b/2,d=0;d<3;d++)if(Math.abs(b-a[d])>=c)return!1;return!0},i.prototype.crossCheckVertical=function(a,b,c,d){var e=this.image,f=e.height,g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;for(var h=a;h>=0&&e.data[b+h*e.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&!e.data[b+h*e.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.data[b+h*e.width]&&g[1]<=c;)g[1]++,h++;if(h==f||g[1]>c)return NaN;for(;h<f&&!e.data[b+h*e.width]&&g[2]<=c;)g[2]++,h++;if(g[2]>c)return NaN;var i=g[0]+g[1]+g[2];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},i.prototype.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),2*a[1],d);if(!isNaN(f)){for(var g=(a[0]+a[1]+a[2])/3,i=this.possibleCenters.length,j=0;j<i;j++){var k=this.possibleCenters[j];if(k.aboutEquals(g,f,e))return new h(e,f,g)}var l=new h(e,f,g);this.possibleCenters.push(l),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(l)}return null},i.prototype.find=function(){for(var a=this.image,b=this.startX,c=this.height,d=b+this.width,e=this.startY+(c>>1),f=[0,0,0],g=0;g<c;g++){var h=e+(0==(1&g)?g+1>>1:-(g+1>>1));f[0]=0,f[1]=0,f[2]=0;for(var i=b;i<d&&!a.data[i+a.width*h];)i++;for(var j=0;i<d;){if(a.data[i+h*a.width])if(1==j)f[j]++;else if(2==j){if(this.foundPatternCross(f)){var k=this.handlePossibleCenter(f,h,i);if(null!=k)return k}f[0]=f[2],f[1]=1,f[2]=0,j=1}else f[++j]++;else 1==j&&j++,f[j]++;i++}if(this.foundPatternCross(f)){var k=this.handlePossibleCenter(f,h,d);if(null!=k)return k}}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"};var K={};K.checkAndNudgePoints=function(a,b){for(var c=a.width,d=a.height,e=!0,f=0;f<b.length&&e;f+=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(g<-1||g>c||h<-1||h>d)throw"Error.checkAndNudgePoints ";e=!1,g==-1?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),h==-1?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}e=!0;for(var f=b.length-2;f>=0&&e;f-=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(g<-1||g>c||h<-1||h>d)throw"Error.checkAndNudgePoints ";e=!1,g==-1?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),h==-1?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}},K.sampleGrid3=function(a,b,d){for(var e=new c(b),f=new Array(b<<1),g=0;g<b;g++){for(var h=f.length,i=g+.5,j=0;j<h;j+=2)f[j]=(j>>1)+.5,f[j+1]=i;d.transformPoints1(f),K.checkAndNudgePoints(a,f);try{for(var j=0;j<h;j+=2){var k=a.data[Math.floor(f[j])+a.width*Math.floor(f[j+1])];k&&e.set_Renamed(j>>1,g)}}catch(a){throw"Error.checkAndNudgePoints"}}return e};var L=3,M=57,N=8,O=2;Object.defineProperty(k.prototype,"X",{get:function(){return this.x}}),Object.defineProperty(k.prototype,"Y",{get:function(){return this.y}}),k.prototype.incrementCount=function(){this.count++},k.prototype.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return d<=1||d/this.estimatedModuleSize<=1}return!1},Object.defineProperty(m.prototype,"CrossCheckStateCount",{get:function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}}),m.prototype.foundPatternCross=function(a){for(var b=0,c=0;c<5;c++){var d=a[c];if(0==d)return!1;b+=d}if(b<7)return!1;var e=Math.floor((b<<N)/7),f=Math.floor(e/2);return Math.abs(e-(a[0]<<N))<f&&Math.abs(e-(a[1]<<N))<f&&Math.abs(3*e-(a[2]<<N))<3*f&&Math.abs(e-(a[3]<<N))<f&&Math.abs(e-(a[4]<<N))<f},m.prototype.centerFromEnd=function(a,b){return b-a[4]-a[3]-a[2]/2},m.prototype.crossCheckVertical=function(a,b,c,d){for(var e=this.image,f=e.height,g=this.CrossCheckStateCount,h=a;h>=0&&e.data[b+h*e.width];)g[2]++,h--;if(h<0)return NaN;for(;h>=0&&!e.data[b+h*e.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&e.data[b+h*e.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.data[b+h*e.width];)g[2]++,h++;if(h==f)return NaN;for(;h<f&&!e.data[b+h*e.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;h<f&&e.data[b+h*e.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},m.prototype.crossCheckHorizontal=function(a,b,c,d){for(var e=this.image,f=e.width,g=this.CrossCheckStateCount,h=a;h>=0&&e.data[h+b*e.width];)g[2]++,h--;if(h<0)return NaN;for(;h>=0&&!e.data[h+b*e.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&e.data[h+b*e.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.data[h+b*e.width];)g[2]++,h++;if(h==f)return NaN;for(;h<f&&!e.data[h+b*e.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;h<f&&e.data[h+b*e.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},m.prototype.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2]+a[3]+a[4],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),a[2],d);if(!isNaN(f)&&(e=this.crossCheckHorizontal(Math.floor(e),Math.floor(f),a[2],d),!isNaN(e))){for(var g=d/7,h=!1,i=this.possibleCenters.length,j=0;j<i;j++){var l=this.possibleCenters[j];if(l.aboutEquals(g,f,e)){l.incrementCount(),h=!0;break}}if(!h){var m=new k(e,f,g);this.possibleCenters.push(m),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},m.prototype.selectBestPatterns=function(){var a=this.possibleCenters.length;if(a<3)throw"Couldn't find enough finder patterns:"+a+" patterns found";if(a>3){for(var b=0,c=0,d=0;d<a;d++){var e=this.possibleCenters[d].estimatedModuleSize;b+=e,c+=e*e}var f=b/a;this.possibleCenters.sort(function(a,b){var c=Math.abs(b.estimatedModuleSize-f),d=Math.abs(a.estimatedModuleSize-f);return c<d?-1:c==d?0:1});for(var g=Math.sqrt(c/a-f*f),h=Math.max(.2*f,g),d=this.possibleCenters-1;d>=0;d--){var i=this.possibleCenters[d];Math.abs(i.estimatedModuleSize-f)>h&&this.possibleCenters.splice(d,1)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(a,b){return a.count>b.count?-1:a.count<b.count?1:0}),[this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2]]},m.prototype.findRowSkip=function(){var a=this.possibleCenters.length;if(a<=1)return 0;for(var b=null,c=0;c<a;c++){var d=this.possibleCenters[c];if(d.count>=O){if(null!=b)return this.hasSkipped=!0,Math.floor((Math.abs(b.X-d.X)-Math.abs(b.Y-d.Y))/2);b=d}}return 0},m.prototype.haveMultiplyConfirmedCenters=function(){for(var a=0,b=0,c=this.possibleCenters.length,d=0;d<c;d++){var e=this.possibleCenters[d];e.count>=O&&(a++,b+=e.estimatedModuleSize)}if(a<3)return!1;for(var f=b/c,g=0,d=0;d<c;d++)e=this.possibleCenters[d],g+=Math.abs(e.estimatedModuleSize-f);return g<=.05*b},m.prototype.findFinderPattern=function(a){var b=!1;this.image=a;var c=a.height,d=a.width,e=Math.floor(3*c/(4*M));(e<L||b)&&(e=L);for(var f=!1,g=new Array(5),h=e-1;h<c&&!f;h+=e){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;for(var i=0,k=0;k<d;k++)if(a.data[k+h*a.width])1==(1&i)&&i++,g[i]++;else if(0==(1&i))if(4==i)if(this.foundPatternCross(g)){var m=this.handlePossibleCenter(g,h,k);if(m)if(e=2,this.hasSkipped)f=this.haveMultiplyConfirmedCenters();else{var n=this.findRowSkip();n>g[2]&&(h+=n-g[2]-e,k=d-1)}else{do k++;while(k<d&&!a.data[k+h*a.width]);k--}i=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,i=3;else g[++i]++;else g[i]++;if(this.foundPatternCross(g)){var m=this.handlePossibleCenter(g,h,d);m&&(e=g[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var o=this.selectBestPatterns();return j(o),new l(o)},n.prototype.transformPoints1=function(a){for(var b=a.length,c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33,l=0;l<b;l+=2){var m=a[l],n=a[l+1],o=e*m+h*n+k;a[l]=(c*m+f*n+i)/o,a[l+1]=(d*m+g*n+j)/o}},n.prototype.transformPoints2=function(a,b){for(var c=a.length,d=0;d<c;d++){var e=a[d],f=b[d],g=this.a13*e+this.a23*f+this.a33;a[d]=(this.a11*e+this.a21*f+this.a31)/g,b[d]=(this.a12*e+this.a22*f+this.a32)/g}},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(a){return new n(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)},n.quadrilateralToQuadrilateral=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.quadrilateralToSquare(a,b,c,d,e,f,g,h),r=this.squareToQuadrilateral(i,j,k,l,m,n,o,p);return r.times(q)},n.squareToQuadrilateral=function(a,b,c,d,e,f,g,h){var i=h-f,j=b-d+f-h;if(0==i&&0==j)return new n(c-a,e-c,a,d-b,f-d,b,0,0,1);var k=c-e,l=g-e,m=a-c+e-g,o=d-f,p=k*i-l*o,q=(m*i-l*j)/p,r=(k*j-m*o)/p;return new n(c-a+q*c,g-a+r*g,a,d-b+q*d,h-b+r*h,b,q,r,1)},n.quadrilateralToSquare=function(a,b,c,d,e,f,g,h){return this.squareToQuadrilateral(a,b,c,d,e,f,g,h).buildAdjoint()},p.prototype.sizeOfBlackWhiteBlackRun=function(a,b,c,d){var e=Math.abs(d-b)>Math.abs(c-a);if(e){var f=a;a=b,b=f,f=c,c=d,d=f}for(var g=Math.abs(c-a),h=Math.abs(d-b),i=-g>>1,j=b<d?1:-1,k=a<c?1:-1,l=0,m=a,n=b;m!=c;m+=k){var o=e?n:m,p=e?m:n;if(1==l?this.image.data[o+p*this.image.width]&&l++:this.image.data[o+p*this.image.width]||l++,3==l){var q=m-a,r=n-b;return Math.sqrt(q*q+r*r)}if(i+=h,i>0){if(n==d)break;n+=j,i-=g}}var s=c-a,t=d-b;return Math.sqrt(s*s+t*t)},p.prototype.sizeOfBlackWhiteBlackRunBothWays=function(a,b,c,d){var e=this.sizeOfBlackWhiteBlackRun(a,b,c,d),f=1,g=a-(c-a);g<0?(f=a/(a-g),g=0):g>=this.image.width&&(f=(this.image.width-1-a)/(g-a),g=this.image.width-1);var h=Math.floor(b-(d-b)*f);return f=1,h<0?(f=b/(b-h),h=0):h>=this.image.height&&(f=(this.image.height-1-b)/(h-b),h=this.image.height-1),g=Math.floor(a+(g-a)*f),e+=this.sizeOfBlackWhiteBlackRun(a,b,g,h),e-1},p.prototype.calculateModuleSizeOneWay=function(a,b){var c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.X),Math.floor(a.Y),Math.floor(b.X),Math.floor(b.Y)),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(b.X),Math.floor(b.Y),Math.floor(a.X),Math.floor(a.Y));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14},p.prototype.calculateModuleSize=function(a,b,c){return(this.calculateModuleSizeOneWay(a,b)+this.calculateModuleSizeOneWay(a,c))/2},p.prototype.distance=function(a,b){var c=a.X-b.X,d=a.Y-b.Y;return Math.sqrt(c*c+d*d)},p.prototype.computeDimension=function(a,b,c,d){var e=Math.round(this.distance(a,b)/d),f=Math.round(this.distance(a,c)/d),g=(e+f>>1)+7;switch(3&g){case 0:g++;break;case 2:g--;break;case 3:throw"Error"}return g},p.prototype.findAlignmentInRegion=function(a,b,c,d){var e=Math.floor(d*a),f=Math.max(0,b-e),g=Math.min(this.image.width-1,b+e);if(g-f<3*a)throw"Error";var h=Math.max(0,c-e),j=Math.min(this.image.height-1,c+e),k=new i(this.image,f,h,g-f,j-h,a,this.resultPointCallback);return k.find()},p.prototype.createTransform=function(a,b,c,d,e){var f,g,h,i,j=e-3.5;null!=d?(f=d.X,g=d.Y,h=i=j-3):(f=b.X-a.X+c.X,g=b.Y-a.Y+c.Y,h=i=j);var k=n.quadrilateralToQuadrilateral(3.5,3.5,j,3.5,h,i,3.5,j,a.X,a.Y,b.X,b.Y,f,g,c.X,c.Y);return k},p.prototype.sampleGrid=function(a,b,c){var d=K;return d.sampleGrid3(a,c,b)},p.prototype.processFinderPatternInfo=function(a){var b=a.topLeft,c=a.topRight,d=a.bottomLeft,e=this.calculateModuleSize(b,c,d);if(e<1)throw"Error";var g=this.computeDimension(b,c,d,e),h=f.getProvisionalVersionForDimension(g),i=h.DimensionForVersion-7,j=null;if(h.alignmentPatternCenters.length>0)for(var k=c.X-b.X+d.X,l=c.Y-b.Y+d.Y,m=1-3/i,n=Math.floor(b.X+m*(k-b.X)),p=Math.floor(b.Y+m*(l-b.Y)),q=4;q<=16;q<<=1){j=this.findAlignmentInRegion(e,n,p,q);break}var r,s=this.createTransform(b,c,d,j,g),t=this.sampleGrid(this.image,s,g);return r=null==j?[d,b,c]:[d,b,c,j],new o(t,r)},p.prototype.detect=function(){var a=(new m).findFinderPattern(this.image);return this.processFinderPatternInfo(a)},Object.defineProperty(q.prototype,"Zero",{get:function(){return 0==this.coefficients[0]}}),Object.defineProperty(q.prototype,"Degree",{get:function(){return this.coefficients.length-1}}),q.prototype.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},q.prototype.evaluateAt=function(a){if(0==a)return this.getCoefficient(0);var b=this.coefficients.length;if(1==a){for(var c=0,d=0;d<b;d++)c=r.addOrSubtract(c,this.coefficients[d]);return c}for(var e=this.coefficients[0],d=1;d<b;d++)e=r.addOrSubtract(this.field.multiply(a,e),this.coefficients[d]);return e},q.prototype.addOrSubtract=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return a;if(a.Zero)return this;var b=this.coefficients,c=a.coefficients;if(b.length>c.length){var d=b;b=c,c=d}for(var e=new Array(c.length),f=c.length-b.length,g=0;g<f;g++)e[g]=c[g];for(var h=f;h<c.length;h++)e[h]=r.addOrSubtract(b[h-f],c[h]);return new q(this.field,e)},q.prototype.multiply1=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||a.Zero)return this.field.Zero;for(var b=this.coefficients,c=b.length,d=a.coefficients,e=d.length,f=new Array(c+e-1),g=0;g<c;g++)for(var h=b[g],i=0;i<e;i++)f[g+i]=r.addOrSubtract(f[g+i],this.field.multiply(h,d[i]));return new q(this.field,f)},q.prototype.multiply2=function(a){if(0==a)return this.field.Zero;if(1==a)return this;for(var b=this.coefficients.length,c=new Array(b),d=0;d<b;d++)c[d]=this.field.multiply(this.coefficients[d],a);return new q(this.field,c)},q.prototype.multiplyByMonomial=function(a,b){if(a<0)throw"System.ArgumentException";if(0==b)return this.field.Zero;for(var c=this.coefficients.length,d=new Array(c+a),e=0;e<d.length;e++)d[e]=0;for(var e=0;e<c;e++)d[e]=this.field.multiply(this.coefficients[e],b);return new q(this.field,d)},q.prototype.divide=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(a.Zero)throw"Divide by 0";for(var b=this.field.Zero,c=this,d=a.getCoefficient(a.Degree),e=this.field.inverse(d);c.Degree>=a.Degree&&!c.Zero;){var f=c.Degree-a.Degree,g=this.field.multiply(c.getCoefficient(c.Degree),e),h=a.multiplyByMonomial(f,g),i=this.field.buildMonomial(f,g);b=b.addOrSubtract(i),c=c.addOrSubtract(h)}return[b,c]},Object.defineProperty(r.prototype,"Zero",{get:function(){return this.zero}}),Object.defineProperty(r.prototype,"One",{get:function(){return this.one}}),r.prototype.buildMonomial=function(a,b){if(a<0)throw"System.ArgumentException";if(0==b)return this.zero;for(var c=new Array(a+1),d=0;d<c.length;d++)c[d]=0;return c[0]=b,new q(this,c)},r.prototype.exp=function(a){return this.expTable[a]},r.prototype.log=function(a){if(0==a)throw"System.ArgumentException";return this.logTable[a]},r.prototype.inverse=function(a){if(0==a)throw"System.ArithmeticException";return this.expTable[255-this.logTable[a]]},r.prototype.multiply=function(a,b){return 0==a||0==b?0:1==a?b:1==b?a:this.expTable[(this.logTable[a]+this.logTable[b])%255]},r.QR_CODE_FIELD=new r(285),r.DATA_MATRIX_FIELD=new r(301),r.addOrSubtract=function(a,b){return a^b},s.prototype.decode=function(a,b){for(var c=new q(this.field,a),d=new Array(b),e=0;e<d.length;e++)d[e]=0;for(var f=!1,g=!0,e=0;e<b;e++){var h=c.evaluateAt(this.field.exp(f?e+1:e));d[d.length-1-e]=h,0!=h&&(g=!1)}if(!g)for(var i=new q(this.field,d),j=this.runEuclideanAlgorithm(this.field.buildMonomial(b,1),i,b),k=j[0],l=j[1],m=this.findErrorLocations(k),n=this.findErrorMagnitudes(l,m,f),e=0;e<m.length;e++){var o=a.length-1-this.field.log(m[e]);if(o<0)throw"ReedSolomonException Bad error location";a[o]=r.addOrSubtract(a[o],n[e])}},s.prototype.runEuclideanAlgorithm=function(a,b,c){if(a.Degree<b.Degree){var d=a;a=b,b=d}for(var e=a,f=b,g=this.field.One,h=this.field.Zero,i=this.field.Zero,j=this.field.One;f.Degree>=Math.floor(c/2);){var k=e,l=g,m=i;if(e=f,g=h,i=j,e.Zero)throw"r_{i-1} was zero";f=k;for(var n=this.field.Zero,o=e.getCoefficient(e.Degree),p=this.field.inverse(o);f.Degree>=e.Degree&&!f.Zero;){var q=f.Degree-e.Degree,r=this.field.multiply(f.getCoefficient(f.Degree),p);n=n.addOrSubtract(this.field.buildMonomial(q,r)),f=f.addOrSubtract(e.multiplyByMonomial(q,r))}h=n.multiply1(g).addOrSubtract(l),j=n.multiply1(i).addOrSubtract(m)}var s=j.getCoefficient(0);if(0==s)throw"ReedSolomonException sigmaTilde(0) was zero";var t=this.field.inverse(s),u=j.multiply2(t),v=f.multiply2(t);return[u,v]},s.prototype.findErrorLocations=function(a){var b=a.Degree;if(1==b)return new Array(a.getCoefficient(1));for(var c=new Array(b),d=0,e=1;e<256&&d<b;e++)0==a.evaluateAt(e)&&(c[d]=this.field.inverse(e),d++);if(d!=b)throw"Error locator degree does not match number of roots";return c},s.prototype.findErrorMagnitudes=function(a,b,c){for(var d=b.length,e=new Array(d),f=0;f<d;f++){for(var g=this.field.inverse(b[f]),h=1,i=0;i<d;i++)f!=i&&(h=this.field.multiply(h,r.addOrSubtract(1,this.field.multiply(b[i],g))));e[f]=this.field.multiply(a.evaluateAt(g),this.field.inverse(h)),c&&(e[f]=this.field.multiply(e[f],g))}return e};var P={};P.forReference=function(a){if(a<0||a>7)throw"System.ArgumentException";return P.DATA_MASKS[a]},P.DATA_MASKS=[new t,new u,new v,new w,new x,new y,new z,new A],B.prototype.copyBit=function(a,b,c){return this.bitMatrix.get_Renamed(a,b)?c<<1|1:c<<1},B.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var a=0,c=0;c<6;c++)a=this.copyBit(c,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(var d=5;d>=0;d--)a=this.copyBit(8,d,a);if(this.parsedFormatInfo=b.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var e=this.bitMatrix.Dimension;a=0;for(var f=e-8,c=e-1;c>=f;c--)a=this.copyBit(c,8,a);for(var d=e-7;d<e;d++)a=this.copyBit(8,d,a);if(this.parsedFormatInfo=b.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},B.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var a=this.bitMatrix.Dimension,b=a-17>>2;if(b<=6)return f.getVersionForNumber(b);for(var c=0,d=a-11,e=5;e>=0;e--)for(var g=a-9;g>=d;g--)c=this.copyBit(g,e,c);if(this.parsedVersion=f.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;c=0;for(var g=5;g>=0;g--)for(var e=a-9;e>=d;e--)c=this.copyBit(g,e,c);if(this.parsedVersion=f.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;throw"Error readVersion"},B.prototype.readCodewords=function(){var a=this.readFormatInformation(),b=this.readVersion(),c=P.forReference(a.dataMask),d=this.bitMatrix.Dimension;c.unmaskBitMatrix(this.bitMatrix,d);for(var e=b.buildFunctionPattern(),f=!0,g=new Array(b.totalCodewords),h=0,i=0,j=0,k=d-1;k>0;k-=2){6==k&&k--;for(var l=0;l<d;l++)for(var m=f?d-1-l:l,n=0;n<2;n++)e.get_Renamed(k-n,m)||(j++,i<<=1,this.bitMatrix.get_Renamed(k-n,m)&&(i|=1),8==j&&(g[h++]=i,j=0,i=0));f^=!0}if(h!=b.totalCodewords)throw"Error readCodewords";return g},C.getDataBlocks=function(a,b,c){if(a.length!=b.totalCodewords)throw"ArgumentException";for(var d=b.getECBlocksForLevel(c),e=0,f=d.getECBlocks(),g=0;g<f.length;g++)e+=f[g].count;for(var h=new Array(e),i=0,j=0;j<f.length;j++)for(var k=f[j],g=0;g<k.count;g++){var l=k.dataCodewords,m=d.ecCodewordsPerBlock+l;h[i++]=new C(l,new Array(m))}for(var n=h[0].codewords.length,o=h.length-1;o>=0;){var p=h[o].codewords.length;if(p==n)break;o--}o++;for(var q=n-d.ecCodewordsPerBlock,r=0,g=0;g<q;g++)for(var j=0;j<i;j++)h[j].codewords[g]=a[r++];for(var j=o;j<i;j++)h[j].codewords[q]=a[r++];for(var s=h[0].codewords.length,g=q;g<s;g++)for(var j=0;j<i;j++){var t=j<o?g:g+1;h[j].codewords[t]=a[r++]}return h},D.prototype.getNextBits=function(a){var b=0;if(a<this.bitPointer+1){for(var c=0,d=0;d<a;d++)c+=1<<d;return c<<=this.bitPointer-a+1,b=(this.blocks[this.blockPointer]&c)>>this.bitPointer-a+1,this.bitPointer-=a,b}if(a<this.bitPointer+1+8){for(var e=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;return b=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1),this.blockPointer++,b+=this.blocks[this.blockPointer]>>8-(a-(this.bitPointer+1)),this.bitPointer=this.bitPointer-a%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}if(a<this.bitPointer+1+16){for(var e=0,f=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;var g=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1);this.blockPointer++;var h=this.blocks[this.blockPointer]<<a-(this.bitPointer+1+8);this.blockPointer++;for(var d=0;d<a-(this.bitPointer+1+8);d++)f+=1<<d;f<<=8-(a-(this.bitPointer+1+8));var i=(this.blocks[this.blockPointer]&f)>>8-(a-(this.bitPointer+1+8));return b=g+h+i,this.bitPointer=this.bitPointer-(a-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}return 0},D.prototype.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},D.prototype.getDataLength=function(a){for(var b=0;a>>b!=1;)b++;return this.getNextBits(R.sizeOfDataLengthInfo[this.dataLengthMode][b])},D.prototype.getRomanAndFigureString=function(a){var b=a,c=0,d="",e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];do if(b>1){c=this.getNextBits(11);var f=Math.floor(c/45),g=c%45;d+=e[f],d+=e[g],b-=2}else 1==b&&(c=this.getNextBits(6),d+=e[c],b-=1);while(b>0);return d},D.prototype.getFigureString=function(a){var b=a,c=0,d="";do b>=3?(c=this.getNextBits(10),c<100&&(d+="0"),c<10&&(d+="0"),b-=3):2==b?(c=this.getNextBits(7),c<10&&(d+="0"),b-=2):1==b&&(c=this.getNextBits(4),b-=1),d+=c;while(b>0);return d},D.prototype.get8bitByteArray=function(a){var b=a,c=0,d=[];do c=this.getNextBits(8),d.push(c),b--;while(b>0);return d},D.prototype.getKanjiString=function(a){var b=a,c=0,d="";do{c=this.getNextBits(13);var e=c%192,f=c/192,g=(f<<8)+e,h=0;h=g+33088<=40956?g+33088:g+49472,d+=String.fromCharCode(h),b--}while(b>0);return d},Object.defineProperty(D.prototype,"DataByte",{get:function(){for(var a=[],b=1,c=2,d=4,e=8;;){var f=this.NextMode();if(0==f){if(a.length>0)break;throw"Empty data block"}if(f!=b&&f!=c&&f!=d&&f!=e)throw"Invalid mode: "+f+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";var g=this.getDataLength(f);if(g<1)throw"Invalid data length: "+g;switch(f){case b:for(var h=this.getFigureString(g),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h.charCodeAt(j);a.push(i);break;case c:for(var h=this.getRomanAndFigureString(g),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h.charCodeAt(j);a.push(i);break;case d:var k=this.get8bitByteArray(g);a.push(k);break;case e:var h=this.getKanjiString(g);a.push(h)}}return a}});var Q={};Q.rsDecoder=new s(r.QR_CODE_FIELD),Q.correctErrors=function(a,b){for(var c=a.length,d=new Array(c),e=0;e<c;e++)d[e]=255&a[e];var f=a.length-b;try{Q.rsDecoder.decode(d,f)}catch(a){throw a}for(var e=0;e<b;e++)a[e]=d[e]},Q.decode=function(a){for(var b=new B(a),c=b.readVersion(),d=b.readFormatInformation().errorCorrectionLevel,e=b.readCodewords(),f=C.getDataBlocks(e,c,d),g=0,h=0;h<f.length;h++)g+=f[h].numDataCodewords;for(var i=new Array(g),j=0,k=0;k<f.length;k++){
var l=f[k],m=l.codewords,n=l.numDataCodewords;Q.correctErrors(m,n);for(var h=0;h<n;h++)i[j++]=m[h]}var o=new D(i,c.versionNumber,d.bits);return o};var R={};return R.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],E.prototype.decode=function(a,b){var c=function(){try{this.error=void 0,this.result=this.process(this.imagedata)}catch(a){this.error=a,this.result=void 0}return null!=this.callback&&this.callback(this.result,this.error),this.result}.bind(this);if(void 0==a){var d=document.getElementById("qr-canvas"),e=d.getContext("2d");this.width=d.width,this.height=d.height,this.imagedata=e.getImageData(0,0,this.width,this.height),c()}else if(void 0!=a.width)this.width=a.width,this.height=a.height,this.imagedata={data:b||a.data},this.imagedata.width=a.width,this.imagedata.height=a.height,c();else{var f=new Image;f.crossOrigin="Anonymous",f.onload=function(){var a=document.createElement("canvas"),b=a.getContext("2d"),d=document.getElementById("out-canvas");if(null!=d){var e=d.getContext("2d");e.clearRect(0,0,320,240),e.drawImage(f,0,0,320,240)}a.width=f.width,a.height=f.height,b.drawImage(f,0,0),this.width=f.width,this.height=f.height;try{this.imagedata=b.getImageData(0,0,f.width,f.height)}catch(a){if(this.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",null!=this.callback)return this.callback(this.result)}c()}.bind(this),f.src=a}},E.prototype.decode_utf8=function(a){return decodeURIComponent(escape(a))},E.prototype.process=function(a){for(var b=((new Date).getTime(),this.grayScaleToBitmap(this.grayscale(a))),c=new p(b),d=c.detect(),e=Q.decode(d.bits),f=e.DataByte,g="",h=0;h<f.length;h++)for(var i=0;i<f[h].length;i++)g+=String.fromCharCode(f[h][i]);(new Date).getTime();return this.debug&&void 0,this.decode_utf8(g)},E.prototype.getPixel=function(a,b,c){if(a.width<b)throw"point error";if(a.height<c)throw"point error";var d=4*b+c*a.width*4;return(33*a.data[d]+34*a.data[d+1]+33*a.data[d+2])/100},E.prototype.binarize=function(a){for(var b=new Array(this.width*this.height),c=0;c<this.height;c++)for(var d=0;d<this.width;d++){var e=this.getPixel(d,c);b[d+c*this.width]=e<=a}return b},E.prototype.getMiddleBrightnessPerArea=function(a){for(var b=4,c=Math.floor(a.width/b),d=Math.floor(a.height/b),e=new Array(b),f=0;f<b;f++){e[f]=new Array(b);for(var g=0;g<b;g++)e[f][g]=[0,0]}for(var h=0;h<b;h++)for(var i=0;i<b;i++){e[i][h][0]=255;for(var j=0;j<d;j++)for(var k=0;k<c;k++){var l=a.data[c*i+k+(d*h+j)*a.width];l<e[i][h][0]&&(e[i][h][0]=l),l>e[i][h][1]&&(e[i][h][1]=l)}}for(var m=new Array(b),n=0;n<b;n++)m[n]=new Array(b);for(var h=0;h<b;h++)for(var i=0;i<b;i++)m[i][h]=Math.floor((e[i][h][0]+e[i][h][1])/2);return m},E.prototype.grayScaleToBitmap=function(a){for(var b=this.getMiddleBrightnessPerArea(a),c=b.length,d=Math.floor(a.width/c),e=Math.floor(a.height/c),f=0;f<c;f++)for(var g=0;g<c;g++)for(var h=0;h<e;h++)for(var i=0;i<d;i++)a.data[d*g+i+(e*f+h)*a.width]=a.data[d*g+i+(e*f+h)*a.width]<b[g][f];return a},E.prototype.grayscale=function(a){for(var b=new Array(a.width*a.height),c=0;c<a.height;c++)for(var d=0;d<a.width;d++){var e=this.getPixel(a,d,c);b[d+c*a.width]=e}return{height:a.height,width:a.width,data:b}},E}),angular.module("bverifyApp").directive("qrcode",["$window",function(a){var b=!!a.CanvasRenderingContext2D,c={L:"Low",M:"Medium",Q:"Quartile",H:"High"},d=function(a,b,c,d){for(var e=0;e<c;e++)for(var f=0;f<c;f++){var g=Math.ceil((f+1)*d)-Math.floor(f*d),h=Math.ceil((e+1)*d)-Math.floor(e*d);a.fillStyle=b.isDark(e,f)?"#000":"#fff",a.fillRect(Math.round(f*d),Math.round(e*d),g,h)}};return{restrict:"E",template:'<canvas class="qrcode"></canvas>',link:function(a,e,f){var g,h,i,j,k,l,m,n,o,p=e[0],q=e.find("canvas"),r=q[0],s=b?r.getContext("2d"):null,t="download"in f,u=f.href,v=t||u?document.createElement("a"):"",w=/^\s+|\s+$/g,x=function(a){h=Math.max(1,Math.min(parseInt(a,10),40))||5},y=function(a){i=a in c?a:"M"},z=function(a){if(a){j=a.replace(w,""),n=qrcode(h,i),n.addData(j);try{n.make()}catch(a){return void(g=a.message)}g=!1,l=n.getModuleCount()}},A=function(a){k=parseInt(a,10)||2*l,m=k/l,r.width=r.height=k},B=function(){if(n){if(g)return v&&(v.removeAttribute("download"),v.title="",v.href="#_"),b||(p.innerHTML='<img src width="'+k+'"height="'+k+'"class="qrcode">'),void a.$emit("qrcode:error",g);if(t&&(p.download="qrcode.png",p.title="Download QR code"),b){if(d(s,n,l,m),t)return void(p.href=r.toDataURL("image/png"))}else if(p.innerHTML=n.createImgTag(m,0),o=e.find("img"),o.addClass("qrcode"),t)return void(p.href=o[0].src);u&&(p.href=u)}};v&&(v.className="qrcode-link",q.wrap(v),p=p.firstChild),x(f.version),y(f.errorCorrectionLevel),A(f.size),f.$observe("version",function(a){a&&(x(a),z(j),A(k),B())}),f.$observe("errorCorrectionLevel",function(a){a&&(y(a),z(j),A(k),B())}),f.$observe("data",function(a){a&&(z(a),A(k),B())}),f.$observe("size",function(a){a&&(A(a),B())}),f.$observe("href",function(a){a&&(u=a,B())})}}}]);var qrcode=function(){function a(b,c){if("undefined"==typeof b.length)throw new Error(b.length+"/"+c);var d=function(){for(var a=0;a<b.length&&0==b[a];)a+=1;for(var d=new Array(b.length-a+c),e=0;e<b.length-a;e+=1)d[e]=b[e+a];return d}(),e={};return e.getAt=function(a){return d[a]},e.getLength=function(){return d.length},e.multiply=function(b){for(var c=new Array(e.getLength()+b.getLength()-1),d=0;d<e.getLength();d+=1)for(var f=0;f<b.getLength();f+=1)c[d+f]^=g.gexp(g.glog(e.getAt(d))+g.glog(b.getAt(f)));return a(c,0)},e.mod=function(b){if(e.getLength()-b.getLength()<0)return e;for(var c=g.glog(e.getAt(0))-g.glog(b.getAt(0)),d=new Array(e.getLength()),f=0;f<e.getLength();f+=1)d[f]=e.getAt(f);for(var f=0;f<b.getLength();f+=1)d[f]^=g.gexp(g.glog(b.getAt(f))+c);return a(d,0).mod(b)},e}var b=function(b,c){var e=236,g=17,k=b,l=d[c],m=null,n=0,p=null,q=new Array,r={},s=function(a,b){n=4*k+17,m=function(a){for(var b=new Array(a),c=0;c<a;c+=1){b[c]=new Array(a);for(var d=0;d<a;d+=1)b[c][d]=null}return b}(n),t(0,0),t(n-7,0),t(0,n-7),w(),v(),y(a,b),k>=7&&x(a),null==p&&(p=B(k,l,q)),z(p,b)},t=function(a,b){for(var c=-1;c<=7;c+=1)if(!(a+c<=-1||n<=a+c))for(var d=-1;d<=7;d+=1)b+d<=-1||n<=b+d||(0<=c&&c<=6&&(0==d||6==d)||0<=d&&d<=6&&(0==c||6==c)||2<=c&&c<=4&&2<=d&&d<=4?m[a+c][b+d]=!0:m[a+c][b+d]=!1)},u=function(){for(var a=0,b=0,c=0;c<8;c+=1){s(!0,c);var d=f.getLostPoint(r);(0==c||a>d)&&(a=d,b=c)}return b},v=function(){for(var a=8;a<n-8;a+=1)null==m[a][6]&&(m[a][6]=a%2==0);for(var b=8;b<n-8;b+=1)null==m[6][b]&&(m[6][b]=b%2==0)},w=function(){for(var a=f.getPatternPosition(k),b=0;b<a.length;b+=1)for(var c=0;c<a.length;c+=1){var d=a[b],e=a[c];if(null==m[d][e])for(var g=-2;g<=2;g+=1)for(var h=-2;h<=2;h+=1)g==-2||2==g||h==-2||2==h||0==g&&0==h?m[d+g][e+h]=!0:m[d+g][e+h]=!1}},x=function(a){for(var b=f.getBCHTypeNumber(k),c=0;c<18;c+=1){var d=!a&&1==(b>>c&1);m[Math.floor(c/3)][c%3+n-8-3]=d}for(var c=0;c<18;c+=1){var d=!a&&1==(b>>c&1);m[c%3+n-8-3][Math.floor(c/3)]=d}},y=function(a,b){for(var c=l<<3|b,d=f.getBCHTypeInfo(c),e=0;e<15;e+=1){var g=!a&&1==(d>>e&1);e<6?m[e][8]=g:e<8?m[e+1][8]=g:m[n-15+e][8]=g}for(var e=0;e<15;e+=1){var g=!a&&1==(d>>e&1);e<8?m[8][n-e-1]=g:e<9?m[8][15-e-1+1]=g:m[8][15-e-1]=g}m[n-8][8]=!a},z=function(a,b){for(var c=-1,d=n-1,e=7,g=0,h=f.getMaskFunction(b),i=n-1;i>0;i-=2)for(6==i&&(i-=1);;){for(var j=0;j<2;j+=1)if(null==m[d][i-j]){var k=!1;g<a.length&&(k=1==(a[g]>>>e&1));var l=h(d,i-j);l&&(k=!k),m[d][i-j]=k,e-=1,e==-1&&(g+=1,e=7)}if(d+=c,d<0||n<=d){d-=c,c=-c;break}}},A=function(b,c){for(var d=0,e=0,g=0,h=new Array(c.length),i=new Array(c.length),j=0;j<c.length;j+=1){var k=c[j].dataCount,l=c[j].totalCount-k;e=Math.max(e,k),g=Math.max(g,l),h[j]=new Array(k);for(var m=0;m<h[j].length;m+=1)h[j][m]=255&b.getBuffer()[m+d];d+=k;var n=f.getErrorCorrectPolynomial(l),o=a(h[j],n.getLength()-1),p=o.mod(n);i[j]=new Array(n.getLength()-1);for(var m=0;m<i[j].length;m+=1){var q=m+p.getLength()-i[j].length;i[j][m]=q>=0?p.getAt(q):0}}for(var r=0,m=0;m<c.length;m+=1)r+=c[m].totalCount;for(var s=new Array(r),t=0,m=0;m<e;m+=1)for(var j=0;j<c.length;j+=1)m<h[j].length&&(s[t]=h[j][m],t+=1);for(var m=0;m<g;m+=1)for(var j=0;j<c.length;j+=1)m<i[j].length&&(s[t]=i[j][m],t+=1);return s},B=function(a,b,c){for(var d=h.getRSBlocks(a,b),j=i(),k=0;k<c.length;k+=1){var l=c[k];j.put(l.getMode(),4),j.put(l.getLength(),f.getLengthInBits(l.getMode(),a)),l.write(j)}for(var m=0,k=0;k<d.length;k+=1)m+=d[k].dataCount;if(j.getLengthInBits()>8*m)throw new Error("code length overflow. ("+j.getLengthInBits()+">"+8*m+")");for(j.getLengthInBits()+4<=8*m&&j.put(0,4);j.getLengthInBits()%8!=0;)j.putBit(!1);for(;;){if(j.getLengthInBits()>=8*m)break;if(j.put(e,8),j.getLengthInBits()>=8*m)break;j.put(g,8)}return A(j,d)};return r.addData=function(a){var b=j(a);q.push(b),p=null},r.isDark=function(a,b){if(a<0||n<=a||b<0||n<=b)throw new Error(a+","+b);return m[a][b]},r.getModuleCount=function(){return n},r.make=function(){s(!1,u())},r.createTableTag=function(a,b){a=a||2,b="undefined"==typeof b?4*a:b;var c="";c+='<table style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: "+b+"px;",c+='">',c+="<tbody>";for(var d=0;d<r.getModuleCount();d+=1){c+="<tr>";for(var e=0;e<r.getModuleCount();e+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+a+"px;",c+=" height: "+a+"px;",c+=" background-color: ",c+=r.isDark(d,e)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return c+="</tbody>",c+="</table>"},r.createSvgTag=function(a,b){a=a||2,b="undefined"==typeof b?4*a:b;var c,d,e,f,g,h=r.getModuleCount()*a+2*b,i="";for(g="l"+a+",0 0,"+a+" -"+a+",0 0,-"+a+"z ",i+="<svg",i+=' width="'+h+'px"',i+=' height="'+h+'px"',i+=' xmlns="http://www.w3.org/2000/svg"',i+=">",i+='<path d="',e=0;e<r.getModuleCount();e+=1)for(f=e*a+b,c=0;c<r.getModuleCount();c+=1)r.isDark(e,c)&&(d=c*a+b,i+="M"+d+","+f+g);return i+='" stroke="transparent" fill="black"/>',i+="</svg>"},r.createImgTag=function(a,b){a=a||2,b="undefined"==typeof b?4*a:b;var c=r.getModuleCount()*a+2*b,d=b,e=c-b;return o(c,c,function(b,c){if(d<=b&&b<e&&d<=c&&c<e){var f=Math.floor((b-d)/a),g=Math.floor((c-d)/a);return r.isDark(g,f)?0:1}return 1})},r};b.stringToBytes=function(a){for(var b=new Array,c=0;c<a.length;c+=1){var d=a.charCodeAt(c);b.push(255&d)}return b},b.createStringToBytes=function(a,b){var c=function(){for(var c=m(a),d=function(){var a=c.read();if(a==-1)throw new Error;return a},e=0,f={};;){var g=c.read();if(g==-1)break;var h=d(),i=d(),j=d(),k=String.fromCharCode(g<<8|h),l=i<<8|j;f[k]=l,e+=1}if(e!=b)throw new Error(e+" != "+b);return f}(),d="?".charCodeAt(0);return function(a){for(var b=new Array,e=0;e<a.length;e+=1){var f=a.charCodeAt(e);if(f<128)b.push(f);else{var g=c[a.charAt(e)];"number"==typeof g?(255&g)==g?b.push(g):(b.push(g>>>8),b.push(255&g)):b.push(d)}}return b}};var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},e={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f=function(){var b=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],d=1335,f=7973,h=21522,i={},j=function(a){for(var b=0;0!=a;)b+=1,a>>>=1;return b};return i.getBCHTypeInfo=function(a){for(var b=a<<10;j(b)-j(d)>=0;)b^=d<<j(b)-j(d);return(a<<10|b)^h},i.getBCHTypeNumber=function(a){for(var b=a<<12;j(b)-j(f)>=0;)b^=f<<j(b)-j(f);return a<<12|b},i.getPatternPosition=function(a){return b[a-1]},i.getMaskFunction=function(a){switch(a){case e.PATTERN000:return function(a,b){return(a+b)%2==0};case e.PATTERN001:return function(a,b){return a%2==0};case e.PATTERN010:return function(a,b){return b%3==0};case e.PATTERN011:return function(a,b){return(a+b)%3==0};case e.PATTERN100:return function(a,b){return(Math.floor(a/2)+Math.floor(b/3))%2==0};case e.PATTERN101:return function(a,b){return a*b%2+a*b%3==0};case e.PATTERN110:return function(a,b){return(a*b%2+a*b%3)%2==0};case e.PATTERN111:return function(a,b){return(a*b%3+(a+b)%2)%2==0};default:throw new Error("bad maskPattern:"+a)}},i.getErrorCorrectPolynomial=function(b){for(var c=a([1],0),d=0;d<b;d+=1)c=c.multiply(a([1,g.gexp(d)],0));return c},i.getLengthInBits=function(a,b){if(1<=b&&b<10)switch(a){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(b<27)switch(a){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(b<41))throw new Error("type:"+b);switch(a){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},i.getLostPoint=function(a){for(var b=a.getModuleCount(),c=0,d=0;d<b;d+=1)for(var e=0;e<b;e+=1){for(var f=0,g=a.isDark(d,e),h=-1;h<=1;h+=1)if(!(d+h<0||b<=d+h))for(var i=-1;i<=1;i+=1)e+i<0||b<=e+i||0==h&&0==i||g==a.isDark(d+h,e+i)&&(f+=1);f>5&&(c+=3+f-5)}for(var d=0;d<b-1;d+=1)for(var e=0;e<b-1;e+=1){var j=0;a.isDark(d,e)&&(j+=1),a.isDark(d+1,e)&&(j+=1),a.isDark(d,e+1)&&(j+=1),a.isDark(d+1,e+1)&&(j+=1),0!=j&&4!=j||(c+=3)}for(var d=0;d<b;d+=1)for(var e=0;e<b-6;e+=1)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;e<b;e+=1)for(var d=0;d<b-6;d+=1)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;e<b;e+=1)for(var d=0;d<b;d+=1)a.isDark(d,e)&&(k+=1);var l=Math.abs(100*k/b/b-50)/5;return c+=10*l},i}(),g=function(){for(var a=new Array(256),b=new Array(256),c=0;c<8;c+=1)a[c]=1<<c;for(var c=8;c<256;c+=1)a[c]=a[c-4]^a[c-5]^a[c-6]^a[c-8];for(var c=0;c<255;c+=1)b[a[c]]=c;var d={};return d.glog=function(a){if(a<1)throw new Error("glog("+a+")");return b[a]},d.gexp=function(b){for(;b<0;)b+=255;for(;b>=256;)b-=255;return a[b]},d}(),h=function(){var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],b=function(a,b){var c={};return c.totalCount=a,c.dataCount=b,c},c={},e=function(b,c){switch(c){case d.L:return a[4*(b-1)+0];case d.M:return a[4*(b-1)+1];case d.Q:return a[4*(b-1)+2];case d.H:return a[4*(b-1)+3];default:return}};return c.getRSBlocks=function(a,c){var d=e(a,c);if("undefined"==typeof d)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var f=d.length/3,g=new Array,h=0;h<f;h+=1)for(var i=d[3*h+0],j=d[3*h+1],k=d[3*h+2],l=0;l<i;l+=1)g.push(b(j,k));return g},c}(),i=function(){var a=new Array,b=0,c={};return c.getBuffer=function(){return a},c.getAt=function(b){var c=Math.floor(b/8);return 1==(a[c]>>>7-b%8&1)},c.put=function(a,b){for(var d=0;d<b;d+=1)c.putBit(1==(a>>>b-d-1&1))},c.getLengthInBits=function(){return b},c.putBit=function(c){var d=Math.floor(b/8);a.length<=d&&a.push(0),c&&(a[d]|=128>>>b%8),b+=1},c},j=function(a){var d=c.MODE_8BIT_BYTE,e=b.stringToBytes(a),f={};return f.getMode=function(){return d},f.getLength=function(a){return e.length},f.write=function(a){for(var b=0;b<e.length;b+=1)a.put(e[b],8)},f},k=function(){var a=new Array,b={};return b.writeByte=function(b){a.push(255&b)},b.writeShort=function(a){b.writeByte(a),b.writeByte(a>>>8)},b.writeBytes=function(a,c,d){c=c||0,d=d||a.length;for(var e=0;e<d;e+=1)b.writeByte(a[e+c])},b.writeString=function(a){for(var c=0;c<a.length;c+=1)b.writeByte(a.charCodeAt(c))},b.toByteArray=function(){return a},b.toString=function(){var b="";b+="[";for(var c=0;c<a.length;c+=1)c>0&&(b+=","),b+=a[c];return b+="]"},b},l=function(){var a=0,b=0,c=0,d="",e={},f=function(a){d+=String.fromCharCode(g(63&a))},g=function(a){if(a<0);else{if(a<26)return 65+a;if(a<52)return 97+(a-26);if(a<62)return 48+(a-52);if(62==a)return 43;if(63==a)return 47}throw new Error("n:"+a)};return e.writeByte=function(d){for(a=a<<8|255&d,b+=8,c+=1;b>=6;)f(a>>>b-6),b-=6},e.flush=function(){if(b>0&&(f(a<<6-b),a=0,b=0),c%3!=0)for(var e=3-c%3,g=0;g<e;g+=1)d+="="},e.toString=function(){return d},e},m=function(a){var b=a,c=0,d=0,e=0,f={};f.read=function(){for(;e<8;){if(c>=b.length){if(0==e)return-1;throw new Error("unexpected end of file./"+e)}var a=b.charAt(c);if(c+=1,"="==a)return e=0,-1;a.match(/^\s$/)||(d=d<<6|g(a.charCodeAt(0)),e+=6)}var f=d>>>e-8&255;return e-=8,f};var g=function(a){if(65<=a&&a<=90)return a-65;if(97<=a&&a<=122)return a-97+26;if(48<=a&&a<=57)return a-48+52;if(43==a)return 62;if(47==a)return 63;throw new Error("c:"+a)};return f},n=function(a,b){var c=a,d=b,e=new Array(a*b),f={};f.setPixel=function(a,b,d){e[b*c+a]=d},f.write=function(a){a.writeString("GIF87a"),a.writeShort(c),a.writeShort(d),a.writeByte(128),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(255),a.writeByte(255),a.writeByte(255),a.writeString(","),a.writeShort(0),a.writeShort(0),a.writeShort(c),a.writeShort(d),a.writeByte(0);var b=2,e=h(b);a.writeByte(b);for(var f=0;e.length-f>255;)a.writeByte(255),a.writeBytes(e,f,255),f+=255;a.writeByte(e.length-f),a.writeBytes(e,f,e.length-f),a.writeByte(0),a.writeString(";")};var g=function(a){var b=a,c=0,d=0,e={};return e.write=function(a,e){if(a>>>e!=0)throw new Error("length over");for(;c+e>=8;)b.writeByte(255&(a<<c|d)),e-=8-c,a>>>=8-c,d=0,c=0;d|=a<<c,c+=e},e.flush=function(){c>0&&b.writeByte(d)},e},h=function(a){for(var b=1<<a,c=(1<<a)+1,d=a+1,f=i(),h=0;h<b;h+=1)f.add(String.fromCharCode(h));f.add(String.fromCharCode(b)),f.add(String.fromCharCode(c));var j=k(),l=g(j);l.write(b,d);var m=0,n=String.fromCharCode(e[m]);for(m+=1;m<e.length;){var o=String.fromCharCode(e[m]);m+=1,f.contains(n+o)?n+=o:(l.write(f.indexOf(n),d),f.size()<4095&&(f.size()==1<<d&&(d+=1),f.add(n+o)),n=o)}return l.write(f.indexOf(n),d),l.write(c,d),l.flush(),j.toByteArray()},i=function(){var a={},b=0,c={};return c.add=function(d){if(c.contains(d))throw new Error("dup key:"+d);a[d]=b,b+=1},c.size=function(){return b},c.indexOf=function(b){return a[b]},c.contains=function(b){return"undefined"!=typeof a[b]},c};return f},o=function(a,b,c,d){for(var e=n(a,b),f=0;f<b;f+=1)for(var g=0;g<a;g+=1)e.setPixel(g,f,c(g,f));var h=k();e.write(h);for(var i=l(),j=h.toByteArray(),m=0;m<j.length;m+=1)i.writeByte(j[m]);i.flush();var o="";return o+="<img",o+=' src="',o+="data:image/gif;base64,",o+=i,o+='"',o+=' width="',o+=a,o+='"',o+=' height="',o+=b,o+='"',d&&(o+=' alt="',o+=d,o+='"'),o+="/>"};return b}();!function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports&&(module.exports=a())}(function(){return qrcode}),angular.module("productModule").controller("productAckController",["userModel","appConstants","$state","$rootScope","productServiceAPI","$log","productList","productModel",function(a,b,c,d,e,f,g,h){try{var i=this;i.user=a.getUser(),i.isManufacturer=a.isManufacturer(),i.isRetailer=a.isRetailer(),i.isProducer=a.isProducer(),i.header=i.isManufacturer?"PROCURE RAW MATERIALS":"ACKNOWLEDGE PRODUCTS",i.product=h.getProduct(),i.list=[],g.$promise.then(function(a){h.setProductList(a),i.list=h.getProductList()},function(a){f.error(b.FUNCTIONAL_ERR,a)}).catch(function(a){f.error(b.FUNCTIONAL_ERR,a)})}catch(a){f.error(b.FUNCTIONAL_ERR,a)}}]),angular.module("productModule").factory("productModel",["appConstants","$log",function(a,b){var c={materialName:"Leather",productName:"Handheld Bag",quantity:"50",batchNumber:"B00RWSC2MW",quality:"Full Grain",color:"Brown",weight:"100 kg",manufactureDate:"10/17/2016",registeredDate:new Date,modelNumber:"BG463A",shippedFrom:"",shippedOn:new Date,trackDetails:{currentlyAt:"FedEx",trackRecords:[]},file:{name:""},productList:[]},d={},e=function(){try{this._product=angular.copy(c)}catch(c){b.error(a.FUNCTIONAL_ERR,c)}return this._product},f=function(){try{this._product={}}catch(c){b.error(a.FUNCTIONAL_ERR,c)}return this._product},g=function(c){try{this._product=c}catch(c){b.error(a.FUNCTIONAL_ERR,c)}},h=function(){try{return this._product}catch(c){b.error(a.FUNCTIONAL_ERR,c)}},i=function(){return d.productList},j=function(){d.productList=[]},k=function(a){j(),angular.forEach(a,function(a,b){d.productList.push({materialName:a.materialName||"",productName:a.productName||"",batchNumber:a.batchNumber||"",weight:a.weight||"",quantity:a.quantity||"",manufactureDate:a.manufactureDate||"",registeredDate:a.registeredDate||"",color:a.color||"",modelNumber:a.modelNumber||"",shippedFrom:a.shippedFrom||"",shippedOn:a.shippedOn||"",quality:a.quality||"",trackDetails:a.trackDetails})})};return{getProduct:h,setProduct:g,getProductList:i,setProductList:k,resetProduct:e,clearAll:f}}]),angular.module("productModule",["ngDialog"]),angular.module("productModule").value("productUrl",{register:"asset/data/register.json",products:"asset/data/productList.json",materials:"asset/data/materialList.json",ship:"asset/data/register.json",acknowledge:"asset/data/register.json",deleteProd:"asset/data/deleteProduct.json",deleteMat:"asset/data/deleteMaterial.json"}).service("productResource",["$resource","productUrl","__ENV",function(a,b,c){return a("",{_id:"@productId"},{productList:{url:c.apiUrl+b.products,method:"GET",isArray:"true"},materialList:{url:c.apiUrl+b.materials,method:"GET",isArray:"true"},registerProduct:{url:c.apiUrl+b.register,method:"GET"},shipProduct:{url:c.apiUrl+b.ship,method:"GET"},ackProduct:{url:c.apiUrl+b.acknowledge,method:"GET"},productDelete:{url:c.apiUrl+b.deleteProd,method:"GET",isArray:"true"},matDelete:{url:c.apiUrl+b.deleteMat,method:"GET",isArray:"true"}})}]).service("productServiceAPI",["productResource","appConstants","$q","$log",function(a,b,c,d){this.registerProduct=function(e){var f=c.defer();try{a.registerProduct(e).$promise.then(function(a){f.resolve(a)},function(a){f.reject(a)})}catch(a){d.error(b.FUNCTIONAL_ERR,a)}return f.promise},this.getProductList=function(e){var f=c.defer();try{a.productList(e).$promise.then(function(a){f.resolve(a)},function(a){f.reject(a)})}catch(a){d.error(b.FUNCTIONAL_ERR,a)}return f.promise},this.getMaterialList=function(e){var f=c.defer();try{a.materialList(e).$promise.then(function(a){f.resolve(a)},function(a){f.reject(a)})}catch(a){d.error(b.FUNCTIONAL_ERR,a)}return f.promise},this.shipProduct=function(e){var f=c.defer();try{a.shipProduct(e).$promise.then(function(a){f.resolve(a)},function(a){f.reject(a)})}catch(a){d.error(b.FUNCTIONAL_ERR,a)}return f.promise},this.ackProduct=function(e){var f=c.defer();try{a.ackProduct(e).$promise.then(function(a){f.resolve(a)},function(a){f.reject(a)})}catch(a){d.error(b.FUNCTIONAL_ERR,a)}return f.promise},this.productDelete=function(e){var f=c.defer();try{a.productDelete(e).$promise.then(function(a){f.resolve(a)},function(a){f.reject(a)})}catch(a){d.error(b.FUNCTIONAL_ERR,a)}return f.promise},this.materialDelete=function(e){var f=c.defer();try{a.matDelete(e).$promise.then(function(a){f.resolve(a)},function(a){f.reject(a)})}catch(a){d.error(b.FUNCTIONAL_ERR,a)}return f.promise}}]),angular.module("productModule").controller("dashboardController",["userModel","appConstants","$state","$rootScope","productServiceAPI","$log",function(a,b,c,d,e,f){try{var g=this;g.user=a.getUser(),d.isLoggedIn=a.isLoggedIn()}catch(a){f.error(b.FUNCTIONAL_ERR,a)}}]).controller("productRegisterController",["userModel","appConstants","$state","$rootScope","productServiceAPI","$log","productModel","productList","$scope","ngDialog",function(a,b,c,d,e,f,g,h,i,j){try{var k=this;g.resetProduct(),k.user=a.getUser(),d.isLoggedIn=a.isLoggedIn(),k.isReadonly=!1,k.isManufacturer=a.isManufacturer(),k.isProducer=a.isProducer(),k.isRetailer=a.isRetailer(),k.isAdmin=a.isAdmin(),k.header=k.isManufacturer?"REGISTER NEW PRODUCT":"REGISTER NEW MATERIAL",i.entity=k.isManufacturer?"product":"material",k.product=g.getProduct(),k.list=[],h.$promise.then(function(a){g.setProductList(a),k.list=g.getProductList()},function(a){f.error(b.FUNCTIONAL_ERR,a)}).catch(function(a){f.error(b.FUNCTIONAL_ERR,a)}),k.openDatepicker=function(){k.datepickerObj.popup.opened=!0},i.redirectUser=function(a){j.close(),a?c.reload():c.go("shipment",{tokenId:i.randomToken})},k.registerNewProduct=function(){var a=angular.copy(g.getProduct());delete a.productList,e.registerProduct(a).then(function(a){d.hasError=!1,i.randomToken="LFG"+(Math.floor(9e4*Math.random())+1e4),i.name=k.isManufacturer?a.productName:a.materialName;var b=k.isManufacturer?"productConfirmation":"materialConfirmation";j.open({scope:i,width:600,className:"ngdialog-theme-default confirmation-box",template:b,closeByDocument:!1,showClose:!1})},function(a){f.error(b.FUNCTIONAL_ERR,a)}).catch(function(a){f.error(b.FUNCTIONAL_ERR,a)})},i.$on("edit/view",function(a,b){g.setProduct(b.data),k.product=g.getProduct(),k.isReadonly=!b.isEdit}),i.$on("delete",function(a,c){k.isManufacturer&&e.productDelete({productId:c.id}).then(function(a){g.setProductList(a),k.list=g.getProductList(),d.hasError=!1,d.isSuccess=!0,d.SUCCESS_MSG=k.isManufacturer?b.PROD_DELETED:b.MATERIAL_DELETED},function(a){f.error(b.FUNCTIONAL_ERR,a)}).catch(function(a){f.error(b.FUNCTIONAL_ERR,a)}),k.isProducer&&e.materialDelete({productId:c.id}).then(function(a){g.setProductList(a),k.list=g.getProductList(),d.hasError=!1,d.isSuccess=!0,d.SUCCESS_MSG=k.isManufacturer?b.PROD_DELETED:b.MATERIAL_DELETED},function(a){f.error(b.FUNCTIONAL_ERR,a)}).catch(function(a){f.error(b.FUNCTIONAL_ERR,a)})})}catch(a){}}]),angular.module("productModule").controller("productShipController",["userModel","appConstants","$state","$rootScope","productServiceAPI","$log","productModel","ngDialog","$scope","userServiceAPI",function(a,b,c,d,e,f,g,h,i,j){try{var k=this;g.resetProduct(),k.user=a.getUser(),d.isLoggedIn=a.isLoggedIn(),k.isManufacturer=a.isManufacturer(),k.isProducer=a.isProducer(),k.isRetailer=a.isRetailer(),k.isAdmin=a.isAdmin(),k.product=g.getProduct(),k.openDatepicker=function(){k.datepickerObj.popup.opened=!0},k.settings=b.MULTISELECT_SETTINGS,k.exampleModel=[],k.isManufacturer&&(k.data=[{id:1,label:"Retailer1"},{id:2,label:"Retailer1"},{id:3,label:"Retailer1"},{id:4,label:"Retailer1"},{id:5,label:"Retailer1"},{id:6,label:"Distributer1"},{id:7,label:"Distributer2"},{id:8,label:"Distributer3"},{id:9,label:"Distributer4"},{id:10,label:"Distributer5"}]),a.isProducer(0)&&(k.data=[{id:1,label:"Manufacturer1"},{id:2,label:"Manufacturer2"},{id:3,label:"Manufacturer3"},{id:4,label:"Manufacturer4"}]),i.redirectUser=function(d){h.close();var e={id:k.isManufacturer?"retailer":k.isProducer?"manufacturer":""};j.login(e).then(function(b){a.setUser(b.user),c.go("acknowledge")},function(a){f.error(b.FUNCTIONAL_ERR,a)}).catch(function(a){f.error(b.FUNCTIONAL_ERR,err)})},k.doProductShipment=function(){e.shipProduct(k.product).then(function(a){d.hasError=!1,i.randomToken="LFG"+(Math.floor(9e4*Math.random())+1e4),i.name=k.isManufacturer?a.productName:a.materialName;var b=k.isManufacturer?"productShipConfirmation":"materialShipConfirmation";h.open({scope:i,width:600,template:b,closeByDocument:!1})},function(a){f.error(b.FUNCTIONAL_ERR,a)}).catch(function(a){f.error(b.FUNCTIONAL_ERR,a)})}}catch(a){f.error(b.FUNCTIONAL_ERR,a)}}]),angular.module("searchModule").controller("searchController",["$state","appConstants","userModel","$log","$rootScope","$scope","$stateParams","userInfo",function(a,b,c,d,e,f,g,h){try{var i=this;i.searchQuery="",i.user=c.getUser(),h.user&&(i.user=h.user,c.setUser(h.user)),f.$on("readQR",function(c,d){e.hasError=!1,e.ERROR_MSG=b.UPLOAD_ERR,d&&a.go("home.result",{id:"",trackInfo:d})}),f.$on("QRError",function(a){e.hasError=!0}),i.searchTrackID=function(){a.go("home.result",{id:i.searchQuery,trackInfo:null})}}catch(a){d.error(b.FUNCTIONAL_ERR,a)}}]).controller("searchResultController",["$state","appConstants","$log","shipmentDetails","productModel","$stateParams",function(a,b,c,d,e,f){try{var g=this;e.resetProduct(),g.product=e.getProduct(),g.tokenID=f.id&&""!==f.id?f.id:"",d.$promise.then(function(a){e.setProduct(a),g.product=e.getProduct()},function(a){c.error(b.FUNCTIONAL_ERR,a)}).catch(function(a){c.error(b.FUNCTIONAL_ERR,a)})}catch(a){c.error(b.FUNCTIONAL_ERR,a)}}]),angular.module("searchModule",[]),angular.module("searchModule").value("shipmentUrl",{track:"asset/data/track.json"}).service("trackResource",["$resource","shipmentUrl","__ENV",function(a,b,c){return a("",{},{trackShipment:{url:c.apiUrl+b.track,method:"GET"}})}]).service("searchServiceAPI",["trackResource","$q","appConstants","$log",function(a,b,c,d){this.search=function(e){var f=b.defer();try{a.trackShipment({id:e.id}).$promise.then(function(a){f.resolve(a)},function(a){f.reject(a)})}catch(a){d.error(c.FUNCTIONAL_ERR,a)}return f.promise}}]),angular.module("userModule").controller("userController",["userModel","userServiceAPI","appConstants","$state","$log","$rootScope","$scope","$stateParams","$sce",function(a,b,c,d,e,f,g,h,i){
var j=this;a.isLoggedIn||a.resetUser(),j.newUserObject={},j.header="LOGIN",j.user={},j.file={name:"Upload QR"},j.displayBtn=!1,j.uploadFile=function(a,b){if(a){j.displayBtn=!0;var d=/^image\//;if(!d.test(a.type))return j.uploadErr=!0,void(f.ERROR_MSG=c.UPLOAD_ERR);j.uploadErr=!1,j.file=a}},j.doLogin=function(){d.go("home",{role:window.profile})}}]).controller("logoutController",["userModel","appConstants","$state","$rootScope","$log",function(a,b,c,d,e){try{a.resetUser(),d.isLoggedIn=!1,c.go("home")}catch(a){e.error(b.FUNCTIONAL_ERR,a)}}]),angular.module("userModule").factory("userModel",["localStorageService","appConstants","$log",function(a,b,c){var d={userName:"",certification:"",consortium:{id:"",name:""},userProfile:{id:"",profile:""},isAuthenticatedUser:!1,password:""},e=function(){try{this._user=angular.copy(d),a.remove("User")}catch(a){c.error(b.FUNCTIONAL_ERR,a)}return this._user},f=function(d){try{this._user=d,a.set("User",angular.toJson(this._user))}catch(a){c.error(b.FUNCTIONAL_ERR,a)}},g=function(){try{this._user=angular.fromJson(a.get("User"))||angular.copy(d)}catch(a){c.error(b.FUNCTIONAL_ERR,a)}return this._user},h=function(){return this._user.isAuthenticatedUser},i=function(){return!(!this._user.isAuthenticatedUser||this._user.userProfile.id!==b.USER_ROLES.admin)},j=function(){return!(!this._user.isAuthenticatedUser||this._user.userProfile.id!==b.USER_ROLES.producer)},k=function(){return!(!this._user.isAuthenticatedUser||this._user.userProfile.id!==b.USER_ROLES.manufacturer)},l=function(){return!(!this._user.isAuthenticatedUser||this._user.userProfile.id!==b.USER_ROLES.retailer)},m=function(){return this._user.userProfile};return{getUser:g,setUser:f,isLoggedIn:h,getUserProfile:m,isAdmin:i,isProducer:j,isManufacturer:k,isRetailer:l,resetUser:e}}]),angular.module("userModule",[]),angular.module("userModule").value("userUrl",{login:"asset/data/login.json",register:"api/register"}).service("userResource",["$resource","userUrl","__ENV",function(a,b,c){return a("",{},{authenticateUser:{url:c.apiUrl+b.login,method:"GET"},registerUser:{url:c.apiUrl+b.register,method:"GET"}})}]).service("userServiceAPI",["userResource","appConstants","$q","$log",function(a,b,c,d){this.register=function(b){var d=c.defer();try{a.registerUser(b).$promise.then(function(a){d.resolve(a)},function(a){d.reject(a)})}catch(a){}return d.promise},this.login=function(b){var d=c.defer();try{a.authenticateUser(b).$promise.then(function(a){angular.equals(b.id,"manufacturer")&&(a.user.userName="Azim",a.user.userProfile.id="MANUFACT",a.user.userProfile.profile="Manufacturer",a.user.userProfile.alias="Retailer"),angular.equals(b.id,"retailer")&&(a.user.userName="Macy",a.user.userProfile.id="RETAIL",a.user.userProfile.profile="Retailer",a.user.userProfile.alias="Retailer"),d.resolve(a)},function(a){d.reject(a)})}catch(a){}return d.promise}}]);
//# sourceMappingURL=scriptMap.map