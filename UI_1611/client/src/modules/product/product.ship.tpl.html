<!-- Product/Material shipment by logged user -->

<!-- Directive for app header -->
<app-header isLoggedIn="vm.user.isAuthenticatedUser" user="vm.user"></app-header> <!-- TO-DO // remove hard-code value --> 

<div class="">
  <div class="searchResult col-lg-10 col-md-8 col-sm-10 col-xs-12">

    <!-- Directive for module header -->
    <app-legend header="SHIP PRODUCT"></app-legend> <!-- TO-DO need to apply condition based on profile -->
	

<!-- Below div is just for demo purpose. For retailer, no ship product functionality provided but it has side menu link -->
	<div ng-if="vm.isRetailer || vm.isAdmin" class="searchResultForm col-lg-12 col-md-12 col-sm-12 col-xs-12">
		<div class="col-lg-10 col-md-10 col-sm-10 col-xs-12">
			<div class="alert alert-danger errorDiv">
				Access denied ! You may not have permission to acccess page content.
			</div>
		</div>
	</div>


	<div ng-if="vm.isManufacturer">
		<div class=" searchResultForm col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<form class="registerProduct" ng-submit="vm.doProductShipment()">
				<div class="col-lg-6 col-md-6 col-sm-12">
					<div class="col-lg-12 col-md-12 col-sm-12">
						<div class="col-lg-6 col-md-6 col-sm-12 text-right-lg text-right-md formLabel">
							<label for="prodName">Product Name :</label>
						</div>
						<div class="form-group col-lg-6 col-md-6 col-sm-10">
							<input ng-required="true" type="text" class="form-control" id="prodName" ng-model="vm.product.productName">
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12">
						<div class="col-lg-6 col-md-6 text-right-lg text-right-md formLabel">
							<label for="modelNum">Model Number :</label>
						</div>
						<div class="form-group col-lg-6 col-md-6 col-sm-10">
							<input ng-required="true" type="text" class="form-control" id="modelNum" ng-model="vm.product.modelNumber">
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12">
						<div class="col-lg-6 col-md-6 col-sm-12 text-right-lg text-right-md formLabel" style="margin-top:0px;line-height:16px;">
							<label for="batchNumber">Batch Number :</label>
						</div>
						<div class="form-group col-lg-6 col-md-6 col-sm-10">
							<input ng-required="true" type="text" class="form-control" id="batchNumber" ng-model="vm.product.batchNumber">
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12">
						<div class="col-lg-6 col-md-6 col-sm-12 text-right-lg text-right-md formLabel">
							<label for="productWeight">Product Weight :</label>
						</div>
						<div class="form-group col-lg-6 col-md-6 col-sm-10">
							<input ng-required="true" type="text" class="form-control" id="productWeight" ng-model="vm.product.weight">
						</div>
					</div>
					 <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-6 col-md-6 col-sm-12 text-right-lg text-right-md formLabel">
                                <label for="quantity">Quantity :</label>
                            </div>
                            <div class="form-group col-lg-6 col-md-6 col-sm-10">
                                <input ng-required="true" type="text" class="form-control" id="quantity" ng-model="vm.userQuantity">
                            </div>
                        </div>
					<div class="col-lg-12 col-md-12 col-sm-12">
						<div class="col-lg-6 col-md-6 col-sm-12 text-right-lg text-right-md formLabel">
							<label for="quality">Quality :</label>
						</div>
						<div class="form-group col-lg-6 col-md-6 col-sm-10">
							<input ng-required="true" type="text" class="form-control" id="quality" ng-model="vm.product.quality">
							<div class="noPadding">
								<img class="cursorPointer" ng-mouseover="vm.showProductLineage()" src="asset/images/qr_search.png" class="pull-right" style="width: 27px;position: absolute;top:0px;right: -35px;" />
								<!-- Comment out based on new UI -->
								<!-- popover-trigger="mouseenter" popover-placement="top-left" uib-popover-template="'blackchainProductShipDataView.html'" /> -->
								<div class="pull-right font9" style="position:absolute;top:30px;right:-85px;">Token : ABCDEFG</div>
							</div>
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12">
						<div class="col-lg-6 col-md-6 col-sm-12 text-right-lg text-right-md formLabel" style="line-height:16px;">
							<label for="date">Date of <br class="visible-md"/>Manufacturing&nbsp;:</label>
						</div>
						<div class="form-group col-lg-6 col-md-6 col-sm-10">
							<!-- custom date picker directive -->
							<app-datepicker></app-datepicker>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-md-6 col-sm-12">
					<div class="col-lg-12 col-md-12 col-sm-12">
						<div class="col-lg-6 col-md-6 col-sm-12 text-right-lg text-right-md formLabel">
							<label for="picture">Distributer/Retailer :</label>
						</div>
						<div class="form-group col-lg-6 col-md-6 col-sm-10">
							<div class="multiSelectDirective" ng-dropdown-multiselect="" extra-settings="vm.settings" options="vm.data" selected-model="vm.exampleModel" checkboxes="true"></div>
						</div>
					</div>
				</div>
				<div class="col-lg-8 col-md-8 col-sm-8 col-xs-12 text-right-lg text-center-xs text-right-md" style="padding-left:0px">
					<button type="submit" class="btn btn-primary registerBtn">SHIP PRODUCT</button>
				</div>
				<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 text-left-lg text-center-xs" style="padding-left:0px">
					<button type="reset" ng-click="reset()" class="btn btn-primary registerBtn">CANCEL</button>
				</div>
			</form>
		</div>
	</div>
	</div>
    </div>
  </div>


<!-- Directive for app side menu -->
<side-menu user="vm.user"></side-menu>

<!-- Comment out based on new UI -->
 <!-- <script type="text/ng-template" id="blackchainProductShipDataView.html">
        <div class="col-lg-12 innerPopups">
			<div class="text-center col-lg-10">Manufacturer 1 (18/10/2016, 13:44 - #19507-)</div>
			<div class="col-lg-2"><span class="glyphicon glyphicon-qrcode qrImage"></span></div>
			
			<div class="text-center upArrow"><span class="glyphicon glyphicon-arrow-up"></span></div>
			
			<div class="text-center col-lg-10">Manufacturer 1 (18/10/2016, 13:44 - #19507-)</div>
			<div class="col-lg-2"><span class="glyphicon glyphicon-qrcode qrImage"></span></div>
			
			<div class="text-center upArrow"><span class="glyphicon glyphicon-arrow-up"></span></div>
			
			<div class="text-center col-lg-10">Raw material producer (18/10/2016, 10:44 - #19507-)</div><div class="col-lg-2"><span class="glyphicon glyphicon-qrcode qrImage"></span></div>
		</div>
</script> -->


<script type="text/ng-template" id="productShipConfirmation">

	<legend class="legendHead" style="padding-bottom: 5px;">CONFIRMATION</legend>
	<div class="col-lg-12 col-xs-12 noPadding">
		<div class="col-lg-8 col-xs-8 noPaddingLeft">The shipment for product &quot;{{name}}&quot; has been initiated and a token ID has been generated.</div>
		<div class="col-lg-4 col-xs-4 noPadding">
			<img src="asset/images/user_qr.png" class="" style="position: relative;top:0px;width:70px"/>
			<div>Token : {{randomToken}}</div>
		</div>
	</div>
	<div style="clear:both"></div>
		<div class="col-lg-12 col-xs-12 noPaddingLeft text-center" style="padding-top:20px;">
		<a ng-click="redirectUser(true)" class="cursorPointer"><u style="color:#00BFFF">OK</u></a>
	</div>
	<div style="clear:both"></div>
</script>






<script type="text/ng-template" id="externalTemplate.html">

	<legend class="legendHead" style="padding-bottom:10px;">Product Lineage
		<span class="pull-right" style="color:black;font-weight:normal;font-size:12px;padding-right:20px;">
			<img style="width: 30px;padding: 0px 0px 5px 10px;" src="asset/images/smartContract.png"/>
			<i>Smart Contract Verified</i>
		</span>
	</legend>
	<!--old Changes-->
<div class="col-lg-12 col-xs-12 noPadding dataLineage">
		<div class="col-lg-2 col-xs-2 noPadding">
			<div><span class="borderGreenLeft"></span><span class="borderGreen"></span><span class="borderGreenRight"></span></div>
			<div class="img-responsive"><img src="asset/images/dataLineage1.png" style="width:90%"/></div>
			<div class="col-lg-2 col-xs-2 noPadding"><img style="width: 21px;padding:0px;" src="asset/images/smartContract.png"/></div>
			<div class="col-lg-10 col-xs-10 noPadding" style="font-size:11px;">
				<div>{{lineageSubData.name}}</div>
				<div>Mfg on: {{lineageSubData.mfgDate}}</div>
			</div>
		</div>
		<div class="col-lg-2 col-xs-2 noPadding">
			<div><span class="borderGreenLeft" style="border-color:#00B0F0;"></span><span class="borderGreen" style="border-color:#00B0F0;"></span><span style="border-color:#00B0F0;" class="borderGreenRight"></span></div>
			<div class="img-responsive text-center"><img src="asset/images/dataLineage2.png"/></div>
			<div class="col-lg-2 col-xs-2 noPadding"><img style="width: 21px;padding:0px;" src="asset/images/smartContract.png"/></div>
			<div class="col-lg-10 col-xs-10 noPadding" style="font-size:11px;">
				<div>{{lineageSubData.name}}</div>
				<div>Mfg on: {{lineageSubData.mfgDate}}</div>
				<div>Shipped on: {{lineageSubData.shipmentDate}}</div>
			</div>
		</div>
		<div class="col-lg-1 col-xs-1 noPadding">
			<img class="smartContractManufactutrer" src="asset/images/smartContract.png"/>
			<div><span style="border-color:#00B0F0;" class="borderGreen"></span><span style="border-color:#00B0F0;" class="borderGreenRight"></span></div>
			<div class="img-responsive text-center"><img class="middleImages" src="asset/images/dataLineage3.png"/></div>
		</div>
		<div class="col-lg-2 col-xs-2 noPadding">
			<!--<div><span class="borderGreenLeft"></span><span class="borderGreen" style="right:-100px"></span><span class="borderGreenRight" style="right:-108px;"></span></div>-->
			<div><span class="borderGreenLeft"></span><span class="borderGreen" style="right:-10px"></span></div>
			<div class="img-responsive text-center"><img src="asset/images/dataLineage2.png"/></div>
			<div class="col-lg-2 col-xs-2 noPadding"><img style="width: 21px;padding:0px;" src="asset/images/smartContract.png"/></div>
			<div class="col-lg-10 col-xs-10 noPadding" style="font-size:11px;">
				<div>Manufacturer</div>
				<div ng-repeat="data in lineageSubMaterialData">
					<div class="text-center"><strong>{{data.name}}</strong></div>
					<div>Mfg on: {{data.mfgDate}}</div>
					<div>Received on: {{data.receivedDate}}</div>
				</div>
			</div>
		</div>
		<div class="col-lg-1 col-xs-1 noPadding" style="width:4.5%" ng-class="{ifManufacturer: isShipped == false}" >
			<div><span style="left:0px;" class="borderGreen"></span><span style="" class="borderGreenRight"></span></div>
			<div class="img-responsive text-center">
				<img class="smartContractManufactutrer" src="asset/images/smartContract.png" ng-class="{leftTo10: isShipped == true}"/>
				<img class="middleImagesSmall" src="asset/images/dataLineage8.png" ng-if="!isShipped" style="width:20px;height:20px;position:absolute;left:20px;z-index:9;top:75px;"/>
				<img class="middleImagesSmall" src="asset/images/dataLineage4.png" style="width:35px;height:35px;" ng-class="{leftTo0:isShipped == false}"/>
			</div>
		</div>
		<div class="col-lg-2 col-xs-2 noPadding">
			<div ng-if="isShippedToRetailer"><span class="borderGreenLeft" style="border-color:#00B0F0;"></span><span class="borderGreen" style="border-color:#00B0F0;"></span></div>
			<div class="img-responsive text-center"><img src="asset/images/dataLineage5.png"/></div>
			<div class="col-lg-2 col-xs-2 noPadding"><img style="width: 21px;padding:0px;" src="asset/images/smartContract.png"/></div>
			<div class="col-lg-10 col-xs-10 noPadding" style="font-size:11px;">
				<div>Manufacturer</div>
				<div>Mfg on: {{lineageData.product.mfgDate}}</div>
			</div>
		</div>
		<div class="col-lg-1 col-xs-1 noPadding" style="width:4.5%" ng-if="isShippedToRetailer">
			<div><span style="left:20px;right:-95px;border-color:#00B0F0;" class="borderGreen"></span><span style="right:-100px;border-color:#00B0F0;" class="borderGreenRight"></span></div>
			<img class="smartContractManufactutrer" src="asset/images/smartContract.png"/>
			<div class="img-responsive text-center"><img src="asset/images/dataLineage6.png" class="middleImagesSmall" style="width:35px;height:35px;"/></div>
		</div>
		<div class="col-lg-2 col-xs-2 noPadding" style="width:16%" ng-if="isShippedToRetailer">
			<img class="smartContractManufactutrer" src="asset/images/smartContract.png" style="left:50px;"/>
			<div class="img-responsive text-right"><img src="asset/images/dataLineage7.png"/></div>
			<div class="col-lg-2 col-xs-2 noPadding"><img style="width: 21px;padding:0px;" src="asset/images/smartContract.png"/></div>
			<div class="col-lg-10 col-xs-10 noPadding" style="font-size:11px;">
				<div>Retailer</div>
				<div>Mfg on: {{lineageData.product.mfgDate}}</div>
				<div>Received on: {{lineageData.product.receivedDate}}</div>
			</div>
		</div>
</div>
<!--old Changes-->
<!--new Changes-->
<div class="col-lg-12 col-xs-12 noPadding dataLineage" style="margin-top:20px;" ng-repeat="data in lineageSubMaterialData" ng-if="$index!=0">
	<div class="col-lg-2 col-xs-2 noPadding">
			<div><span class="borderGreenLeft"></span><span class="borderGreen"></span><span class="borderGreenRight"></span></div>
			<div class="img-responsive"><img src="asset/images/dataLineage9.png" style="width:90%"/></div>
			<div class="col-lg-2 col-xs-2 noPadding"><img style="width: 21px;padding:0px;" src="asset/images/smartContract.png"/></div>
			<div class="col-lg-10 col-xs-10 noPadding" style="font-size:11px;">
				<div>{{data.name}}</div>
				<div>Mfg on: {{data.mfgDate}}</div>
			</div>
		</div>
		<div class="col-lg-2 col-xs-2 noPadding">
			<div><span class="borderGreenLeft" style="border-color:#00B0F0;"></span><span class="borderGreen" style="border-color:#00B0F0;right:-20px"></span></div>
			<div class="img-responsive text-center"><img src="asset/images/dataLineage2.png"/></div>
			<div class="col-lg-2 col-xs-2 noPadding"><img style="width: 21px;padding:0px;" src="asset/images/smartContract.png"/></div>
			<div class="col-lg-10 col-xs-10 noPadding" style="font-size:11px;">
				<div>{{data.name}}</div>
				<div>Mfg on: {{data.mfgDate}}</div>
				<div>Shipped on: {{data.shipmentDate}}</div>
			</div>
		</div>
		<div class="col-lg-1 col-xs-1 noPadding">
			<div class="straightLine"><span style="border-color:#00B0F0;top:-5px;right:-65px;" class="borderGreenRight"></span></div>
			<img class="smartContractManufactutrer" src="asset/images/smartContract.png"/>
			<div><span style="border-color:#00B0F0;left:40px;" class="borderGreen"></span><span style="border-color:#00B0F0;" class="borderGreenRight"></span></div>
			<div class="img-responsive text-center"><img src="asset/images/dataLineage6.png" class="middleImagesSmall" style="width:35px;height:35px;"/></div>
		</div>
</div>


	<div style="clear:both"></div>
</script>



<script type="text/ng-template" id="warningBox">
	<legend class="legendHead redWarn">WARNING</legend>
	<div class="col-lg-12 col-xs-12 noPadding">
		The Quantity to be shipped cannot exceed the available quantity/inventory. Please revalidate!
	</div>
	<div style="clear:both"></div>
	<div class="col-lg-12 col-xs-12 noPaddingLeft text-center" style="padding-top:20px;">
		<a class="cursorPointer" ng-click="closeThisDialog(0)"><u style="color:#00BFFF">OK</u></a>
	</div>
	<div style="clear:both"></div>
</script>